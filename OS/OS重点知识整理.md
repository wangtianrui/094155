# 第一章

* ### 设计现代OS的主要目标是什么？

  ①有效性

  ②方便性

  ③可扩充性

  ④开放性

* ### 试说明推动多道批处理系统形成和发展的主要动力是什么？

  ①提高资源利用率

  ②系统吞吐量

  ③方便用户

  ④器件的不断更新换代

  ⑤计算机体系结构的不断发展 

* ### 试说明推动分时系统形成和发展的主要动力是什么？

  主要动力：为了满足用户对人机交互的需求

  主要表现在：①CPU的分时使用缩短了作业的平均周转时间

  ​		      ②人机交互能力使用户能直接控制自己的作业

  ​		      ③主机共享使多用户可以同时使用同一台计算机，独立地处理自己的作业

* ### 为什么要引入实时操作系统？

  实时操作系统：能及时响应外部事件的请求，在规定时间内完成对该事件的处理，并控制所有实时任务协调一致地进行

  引入的原因：①满足应用的需求②更好地满足实时控制领域和实时信息处理领域的需求

* ### OS有哪几大特性，其中最基本的特性是什么？

  四个基本特性：①并发性  ②共享性  ③虚拟性  ④异步性

  最基本的：并发性和共享性

* ### 什么是微内核OS？

  ①足够小的内核，它并非是一个完整的OS，只是将操作系统中最最基本的部分放入到微内核里

  ②基于客户/服务器模式，在①的基础上把操作系统绝大部分功能放到微内核外面的一组服务器中实现。

  ③应用“机制与策略分离”的原理。

  ④采用面对对象的技术

* #### 用户可以通过（命令接口和系统调用）两种方式来使用计算机

* #### 系统调用是有操作系统提供给用户的，它（只能通过用户程序简介调用）

* #### 系统调用的目的是（请求系统服务）

* #### ★★ 为了方便用户直接或间接地控制自己的作业，操作系统向用户提供了命令接口，该接口又可进一步分为（联机用户接口和脱机用户接口） 

* #### ★★ 操作系统与用户通信接口通常不包括（缓存管理指令）：一般有shell、命令解释器、广义指令等

* #### 单处理机系统中，（进程）是不可并行的。（处理机与设备、处理机与通道、设备与设备）是能并行的

* #### ★★ 提高单机资源利用率的关键技术是（多道程序设计技术）：这里注意是资源利用，所以不是虚拟技术，而且虚拟技术也是建立在多道技术上的

* #### 批通道的主要缺点是（无交互能力）

* #### 实时系统必须在（被控制对象规定时间）内处理来自外部的事件

* #### 实时系统的进程调度，通常采用（抢占式的优先级高者优先）算法

* ####  ★★ （资源利用率）不是设计实时操作系统的主要追求目标：安全可靠、及时响应、快速处理

* #### 分时系统的一个重要性能是系统的响应时间，对操作系统（优先级+非抢占式调度算法）因素进行改进有利于改善系统的响应时间

* ####  ★★（中断处理）是操作系统必须系统的功能，而非：图形界面、为进程提供系统调用命令、编译源程序

* ####  ★★ 特权指令只允许（操作系统）使用

* ####  ★★ 从核心态到用户态的转换是由（操作系统程序）执行后完成的，用户态到核心态的转换是由（硬件）完成的

* #### ★★ 访管指令仅在（用户态）下使用

* #### ★★在操作系统中，只能在核心态下执行的指令是（广义指令），核心态下（除访管指令）其他都能执行

* #### ★★ 下列不可能在用户态发生的事件是（进程切换），可能发生的是：系统调用、外部中断、缺页

* #### 计算机开机后，操作系统最终被加载到（RAM）

* #### ★★ 会导致用户态切换到核心态的操作：（系统调用、异常、外围设备的中断）

* ```txt
   内部异常（内中断）可分为故障（fault）、陷阱（trap）和终止（abort）三类。下列有关内部异常的叙述中，错误的（ c ）。
   A、内部异常的产生与当前执行指令相关
   B、内部异常的检测由CPU内部逻辑实现
   C、内部异常的响应发生在指令执行过程中
   D、内部异常处理后返回到发生异常的指令继续执行
   ```

* ```txt
   处理外部中断时，应该由操作系统保存的是（ B ）。
   A、程序计数器（PC）的内容
   B、通用寄存器的内容
   C、块表（TLB）中的内容
   D、Cache中的内容
   ```

* ```txt
   假定下列指令已装入指令寄存器。则执行时不可能导致CPU从用户态变为内核态（系统态）的是（ C ）。
   A、DIV R0,R1		;(R0)/(R1)→R0
   B、INT n			;产生软中断
   C、NOT R0		;寄存器R0的内容取非
   D、MOV R0,addr	;把地址addr处的内存数据放入寄存器R0中
   ```

* ```txt
   下列关于批处理系统的叙述中，正确的是（ A ）。
   Ⅰ.批处理系统允许多个用户与计算机直接交互
   Ⅱ.批处理系统分为单道批处理系统和多道批处理系统
   Ⅲ.中断技术使得多道批处理系统和I/O设备可与CPU并行工作
   A、仅Ⅱ、Ⅲ		B、仅Ⅱ
   C、仅Ⅰ、Ⅱ		D、仅Ⅰ、Ⅲ
   ```

* ```txt
   异常是指令执行过程中在处理器内部发生的特殊事件，中断是来自处理器外部的请求事件。下列关于中断或异常情况的叙述中，错误的是（ A ）。
   A、“访存时缺页”属于中断
   B、“整数除以0”属于异常
   C、“DMA传送结束”属于中断
   D、“存储保护错”属于异常
   ```

* ```txt
   与单道程序系统相比，多道程序系统的优点是（ D ）。
   Ⅰ.CPU利用率高		Ⅱ.系统开销小
   Ⅲ.系统吞吐量大		Ⅳ.I/O设备利用率高
   
   A、仅Ⅰ、Ⅲ		B、仅Ⅰ、Ⅳ
   C、仅Ⅱ、Ⅲ		D、仅Ⅰ、Ⅲ、Ⅳ
   
   ```

* ```txt
   执行系统调用的过程包括如下主要操作：
   ①返回用户态	
   ②执行陷入（trap）指令
   ③传递系统调用参数	
   ④执行响应的服务程序
   正确的执行顺序是（  C ）。   
   A、②→③→①→④		B、 ②→④→③→① 
   C、③→②→④→① 		D、 ③→④→②→①
   3241
   ```

   ```txt
   8.下列关于操作系统的说法中， 错误的是（ A）
   Ⅰ.在通用操作系统管理下的计算机上运行程序，需要向操作系统预订运行时间
   Ⅱ.在通用操作系统管理下的计算机上运行程序，需要确定起始地址，并从这个地址开始执行
   Ⅲ.操作系统需要提供高级程序设计语言的编译器
   Ⅳ.管理计算机系统资源是操作系统关心的主要问题
   
   A、Ⅰ、Ⅲ				B、Ⅱ、Ⅲ
   C、Ⅰ、 Ⅱ、Ⅲ、Ⅳ		D、以上答案都正确
   
   ```

   ```txt
   9.下列说法正确的是（ C ）
   Ⅰ.批处理的主要缺点是需要大量内存
   Ⅱ.当计算机提供了核心态和用户态时，输入/输出指令必须在核心态下执行
   Ⅲ.操作系统中采用多道程序设计技术的最主要原因是为了提高CPU和外部设备的可靠性
   Ⅳ.操作系统中，通道技术是一种硬件技术
   A、Ⅰ、Ⅱ		B、Ⅰ、Ⅲ
   C、Ⅱ、Ⅳ		D、Ⅱ、Ⅲ、Ⅳ
   ```

* ```txt
   10.下列关于系统调用的说法正确的是（  C）
   Ⅰ.用户程序设计时，使用系统调用命令，该命令经过编译后，形成若干参数和陷入（trap）指令
   Ⅱ.用户程序设计时，使用系统调用命令，该命令经过编译后，形成若干参数和屏蔽中断指令
   Ⅲ.系统调用功能是操作系统向用户程序提供的接口
   Ⅳ.用户及其应用程序和应用系统是通过系统调用提供的支持和服务来使用系统资源完成其操作的
   
   A、Ⅰ、Ⅲ			B、Ⅱ、Ⅳ
   C、Ⅰ、Ⅲ、Ⅳ		   D、Ⅱ、Ⅲ、Ⅳ
   
   ```

* ```txt
   17.相对于传统操作系统结构，采用微内核结构设计和实现操作系统具有诸多好处，哪些是微内核结构的特点（C ）
   Ⅰ.使系统更高效
   Ⅱ.添加系统服务时，不必修改内核
   Ⅲ.微内核结构没有单一内核稳定
   Ⅳ.使系统更可靠
   A、Ⅰ、Ⅲ、Ⅳ			B、Ⅰ、Ⅱ、Ⅳ
   C、Ⅱ、Ⅳ			D、Ⅰ、Ⅳ
   ```

* ```txt
   中断处理和子程序调用都需要压栈以保护现场，中断处理一定会保存而子程序调用不需要保存其内容的是（ B ）。
   A、程序计数器
   B、程序状态字寄存器
   C、通用数据寄存器
   D、通用地址寄存器
   ```



# 第二章

* ### 什么是前驱图，为什么要引入前驱图

  前驱图是一个有向无循环图，用于描述进程之间执行的前后关系

* ### 试画出下面四条语句的前驱图

  S1: a = x + y

  S2: b = z + 1

  S3: c = a - b 

  S4: d = c + 1

  ![](https://ws1.sinaimg.cn/large/0067fcixly1fygrwjop9oj30b6040dfo.jpg)

* ### 为什么程序并发执行会产生间断性特征

  程序在并发时，由于他们共享资源，以及为完成同一项任务而相互合作，导致这些并发的进程之间形成了相互制约的关系，进而产生了间断性特征

* ### 在操作系统中为什么要引入进程的概念？他会产生什么样的影响？

  为什么：为了使程序在多道程序环境下能并发执行，并对并发执行的程序加以控制和描述，才引入了进程的概念。

  影响：使程序的并发执行得以实行

* ### 试说明进程在三个基本状态之间转换的典型原因

  ①就绪  -- >  执行  ： 进程分配到CPU资源

  ②执行  -- >  就绪   ： 时间片用完

  ③执行  -- >  阻塞   ：  I/O请求

  ④阻塞   -- >   就绪  ： I/O完成

* ### 为什么要引入挂起状态？该状态有那些性质

  为什么：①终端用户需要②父进程需要③操作系统需要④对换操作需要⑤负荷调节需要

  性质：处于挂起状态的进程不能接受处理机的调度

* ### 引起进程创建的主要事件

  ①用户登录

  ②作业调度

  ③提供服务

  ④应用请求

* ### 试说明引起进程被撤销的主要事件

  ① 正常结束

  ② 异常结束 ： 越界、I/O故障、运行超时、请求超时等

  ③ 外界干预 ： 操作员或操作系统干预，父进程请求，父进程终止等

* ### 试说明引起进程阻塞或被唤醒的主要事件是什么？

  ①请求系统服务

  ②等待某种操作的完成

  ③新数据尚未到达

  ④等待新任务的到达

* ### 为什么要在OS中引入线程

  减少程序在并发执行时所付出的时空开销，让OS有更好的并发性，提高CPU的利用率。

  进程是分配资源的基本单位，而线程是系统调度的基本单位，同一进程中的所有线程共享进程的地址空间

* ### 何谓用户级线程和内核支持线程

  用户级：仅存在于用户空间中，无需内核支持。他的创建、撤销、线程间同步与通信等功能，都无需利用系统调用实现。用户级线程的切换通常发生在一个应用进程的诸多线程之间，同样也不需要内核的支持

  内核支持线程：在内核支持下运行的线程，无论是用户进程中的线程，还是系统进程中的线程，其创建、撤销和切换等都是依赖内核，在内核空间中实现。在内核空间中还为每个内核支持线程设置了线程控制块，内核根据该控制块进行线程的控制 

  **特点**

  内核支持：**内核支持线程具有很小的数据结构和堆栈，线程切换快，开销小**，**对用户的线程切换而言开销较大，需要从用户态转到核心态，分配时间以线程数来定**

  用户级：分配时间以进程数来定。切换不用进内核空间，系统无法感知到用户级线程的存在



  ### 填空题

  * (1)对于一个可执行程序文件，该程序与执行它的进程是___（一对多）___的关系。
  * (2)在单CPU系统中实现并发技术后________A____。
    A.进程在一个时间段内并行执行，CPU与外设并行工作。
    B.进程在一个时刻并行执行，CPU与外设并行工作。
    C.进程在一个时间段内并行执行，CPU与外设串行工作。
    D.进程在一个时刻并行执行，CPU与外设串行工作。
  * (3)从静态角度上看，进程是由__（PCB）____、__（_程序段_）___、___（数据段）____三部分组成。
  * (4)正在执行的进程由于用完其时间片而被暂停执行，此时进程应从执行状态变成为____（就绪状态）_____
  * (5)引入进程，可带来_________（资源利用率提高）_______和（系统吞吐量增加）的好处，但却增加了系统的（时间）和_（空间）__开销。
  * (6)临界区是指进程中用于（访问临界资源）的那段代码。
  * （整型信号量）是一种只能由P和V操作所改变的整型变量，（整型信号量）可用于实现进程的（同步）和（互斥），（互斥）是指排他性地访问临界资源。
  * 8)设有6个进程共享同一互斥段，若最多允许有3个进程进入互斥段，则所采用的互斥信号量的初值为__3__。
  * 有3个进程共享同一程序段，而每次最多允许两个进程进入该程序段，若用P、V操作作同步机制，则记录型信号量S的取值范围为_______2, 1, 0, -1___。
  * 为实现消息缓冲通信，在PCB中应增加_________消息队列首指针____、_________消息队列互斥信号量_________和_________消息队列资源信号量_________三个数据项。
  * `

  ```txt
  二、应用题
  5.某寺庙有小、老和尚若干，有一水缸，由小和尚提水入缸供老和尚饮用。水缸可以容纳10桶水，水取自同一井水。水井狭窄，每次只能容一个桶取水。水桶总数为3个。每次入、出水缸仅一桶，且不可同时进行。试给出有关取水、入水的算法描述。
  Var mutex1, mutex2, empty, full, count: semaphore;
  mutex1:=1; mutex2:=1;
  empty:=10; full:=0; count:=3;
  
  process 小和尚: 
        begin
            repeat
            P(empty);
            P(count);
            P(mutex1);
            从井中取水；
            V(mutex1);
            P(mutex2);
            送水入水缸；
            V(mutex2);
            V(count);
            V(full);
            until false;  
   	  end
   	  
   	  
  process 老和尚: 
        begin
            repeat
            P(full);
            P(count);
            P(mutex2);
            从缸中取水；
            V(mutex2);
            V(empty);
            V(count);
            until false;  
       end
  ```



  ```txt
  Var S1, S2: semaphore:=1,0;
  process A: 
        begin
            repeat
            P(S1);
            拣黑子；
            V(S2);
            until false;  
       end
       
  process B: 
        begin
            repeat
            P(S2);
            拣白子；
            V(S1);  
            until false
        end
  ```

  ```txt
  二、应用题
  3.独木桥问题。某条河上只有一座独木桥，以便行人过河。现在河的两边都有人要过桥，按照下面的规则过桥。为了保证过桥安全，请用P、V操作分别实现正确的管理。
          过桥的规则是：每次只有一个人通过桥。
  Var mutex: semaphore;
  process (E-W)i: 
  begin
  P(mutex);
  过桥；
  V(mutex);  
  end
  
  process (W-E)j: 
  begin
  P(mutex);
  过桥；
  V(mutex);  
  end
  ```

  ```txt
  购物问题。某超级市场，可容纳100个人同时购物，入口处备有篮子，每个购物者可持一个篮子入内购物。出口处结账，并归还篮子（出、入口仅容纳一人通过）。请用P、V操作完成购物同步算法。
  Var S, mutex1, mutex2: semaphore;
  S:=100; mutex1:=1; mutex2:=1
  process Pi: 
  begin
  P(S);
  P(mutex1);
  进入口处，取一只篮子；
  V(mutex1);
  选购商品;
  P(mutex2);
  结账，并归还篮子；
  V(mutex2);
  V(S); 
  end
  ```

  ```txt
  二、应用题
  3.独木桥问题。某条河上只有一座独木桥，以便行人过河。现在河的两边都有人要过桥，按照下面的规则过桥。为了保证过桥安全，请用P、V操作分别实现正确的管理。
          过桥的规则是：同一方向的可连续过桥，某方向有人过桥时另一方向的人要等待。
          
  Var S, S1, S2: semaphore;
  rc1,rc2: integer;
  S, S1, S2:=1;
  rc1,rc2:=0; 
  
  process (E-W)i: 
  begin
  	P(S1);
  	rc1:=rc1+1;
  	if rc1=1 then P(S);
  	V(S1);
  	过桥；
  	P(S1);
  	rc1:=rc1-1;
  	if rc1=0 then V(S);
  	V(S1);  
  end
  
  process (W-E)j: 
  begin
  	P(S2);
  	rc2:=rc2+1;
  	if rc2=1 then P(S);
  	V(S2);
  	过桥；
  	P(S2);
  	rc2:=rc2-1;
  	if rc2=0 then V(S);
  	V(S2);  
  end
  
  S信号量就不解释了
  S1和S2是为了让每次
  ```

  ```txt
  二、应用题
  1.设有无穷多个缓冲区和无穷多个信息，A进程把信息逐个的写入每个缓冲区，B进程则逐个地从缓冲区中取出信息。
  试问：(1)两个进程之间的制约关系；
  	B进程不能超前A进程，但A进程不受B进程的约束。
  	(2)用P、V操作写出两进程的同步算法，并给出信号量的初值；	
      Var S: semaphore := 0;
      begin
      parbegin
      process A: 
      begin
      i:=0;
      L: i:=i+1;
      写入第i个缓冲区；
      V(S);
      goto L; 
      end
  
  process B: 
  begin
  j:=0;
  M: j:=j+1;
  P(S);
  读出第j个缓冲区信息；
  goto M; 
  end
  parend;
  end
  	(3)指出信号量的值的变化范围和其值的含义。
  	信号量S的值域为[-1, ∞]中的整数，当S=-1时，表示缓冲区从未写入或B读空，且B要求进一步读出，也即B超前A欲读取信息。
  ```

  ```txt
  (18)下列原语中，能进行进程通信的原语是___C___和____D__ 。
  A.挂起/撤销	B.创建/撤销	C. P、V操作	D.锁/开锁
  (19)消息缓冲队列通信中的临界资源是___B___ 。
  A.队列中的某个消息缓冲区		B.整个消息缓冲队列
  C.信箱					D.管道
  (20)处于执行状态中的进程若同时发生了下列两种情况：(a)对某信号量执行P操作后，其结果为负；(b)时间片到了中断发生。则该进程将由执行状态变迁为___A___状态。
  A.阻塞		B.就绪		C.阻塞或就绪		D.不定
  
  记录型信号量中，当信号量为负时，进程会调用block原语进行自我阻塞
  ```

  ```txt
  (17)在直接通信方式中，系统通常提供的两条通信原语如下，请选择适当的参数填入。
  	Send(___B___, ___D___);	 Receive(___A___, ___D___);
  A.Sender	B.Receiver	C.text	  D.message	E.mailbox
  ```

  ```txt
  (16)下列关于进程的描述中，正确的是____A__。
  A.进程获得CPU而运行是通过调度得到的。
  B.优先级是进行进程调度的重要依据，一旦确定不能改变。
  C.在单CPU系统中，任一时刻都有1个进程处于运行状态。
  D.进程申请CPU得不到满足时，其状态变为等待状态。
  ```

  ```txt
  (14)下列各项工作步骤中，___B___不是创建进程所必须的步骤。
  A.建立一个PCB		C.为进程分配内存等必要资源
  B.阻塞进程			D.将PCB连接入进程就绪队列
  ```

  ```txt
  (12)当___B___时，进程从执行状态转变为就绪状态。
  A.进程被调度程序选中	B.有高优先级进程到来
  C.等待某一事件	 	D.等待的事件发生
  ```

  ```txt
  (13)在进程转换时，下列___D___转换是不可能发生的。
  A.就绪态→执行态		B.执行态→就绪态
  C.执行态→阻塞态	 	D.阻塞态→执行态
  ```

  ```txt\
  1.下列关于线程的叙述中，正确的是（ A ）
  A、线程包含CPU现场，可以独立执行程序
  B、每个线程有自己独立的地址空间
  C、进程只能包含一个线程
  D、线程之间的通信必须使用系统调用函数
  
  线程本身并不拥有系统资源，只有能保证自己独立运行的资源，同一进程所有线程都是同样的地址空间。多个线程能共享该进程所拥有的资源。
  ```

  ```txt
  4.在单处理机系统中，如果同时存在10个进程，则处于就绪队列中的进程最多有（ C ）个。
  A、1	B、8		C、9	D、10
  一个在执行队列
  ```

  ```txt
  7.在一个多道系统中，若就绪队列不空，就绪的进程数目越多，处理器的效率（ C ）。
  	A、越高		B、越低
  	C、不变		D、不确定
  ```

  ```txt
  8.在进程转换时，下列（ D ）转换是不可能发生的。
  	A、就绪状态→运行状态
  	B、运行状态→就绪状态
  	C、运行状态→阻塞状态
  	D、阻塞状态→运行状态
  ```

  ```txt
  9.一个进程被唤醒，意味着（ A ）
  A、该进程可以重新竞争CPU
  B、优先级变大
  C、PCB移动到就绪队列之首
  D、进程变为运行状态
  ```

  ```txt
  10.下列说法不正确的是（ C ）。
  	A、一个进程可以创建一个或多个线程
  	B、一个线程可以创建一个或多个线程
  	C、一个线程可以创建一个或多个进程
  	D、一个进程可以创建一个或多个进程
  ```

  ```txt
  下列选项中，导致创建新进程的操作是（  C）
  		Ⅰ.用户登录成功	Ⅱ.设备分配
  		Ⅲ.启动程序执行
  	A、 仅Ⅰ和Ⅱ 		B、 仅Ⅱ和Ⅲ 
  	C、 仅Ⅰ和Ⅲ 		D、 Ⅰ、Ⅱ、Ⅲ
  ```

  ```txt
  下列选项中，降低进程优先级的合理时机是（  A ）。
  	A、进程时间片用完
  	B、进程刚完成I/O操作，进入就绪队列
  	C、进程长期处于就绪队列
  	D、进程从就绪状态转为运行状态
  ```

  ———————————————————————进程同步————————————————————————

  * ### 同步——》相互制约——》信号量——》互斥——》生产者消费者、哲学家进餐

  * 原语是指完成某种功能而不被分割和不被中断执行的操作序列，通常可由硬件来实现完成不被分割
    执行特性的功能。如前述的“TestAndSet”和“Swap” 指令，就是由硬件实现的原子操作。

  * 临界区：每个进程中访问临界资源的那段代码为临界区

  * 进入区：对临界资源进行检查的代码为进入区（检查是否有其他在访问之类的）

  * 退出区：将正在访问的标志恢复成未访问的标志

  * 剩余区：剩下的都是

  ```txt
  1.不需要信号量就能实现的功能是（D  ）
  A、进程同步
  B、进程互斥
  C、执行的前驱关系
  D、进程的并发执行
  P57
  ```

  ```txt
  2.若一个信号量的初值为3，进过多次PV操作以后当前值为-1，此表示等待进去临界区的进程数是（ A ）
  	A、1	B、2		C、3	D、4
  记录型信号量的绝对值代表等待数量
  ```

  ```txt
  3.一个正在访问临界资源的进程由于申请等待I/O操作而被中断时，它是（ C ）
  	A、可以允许其他进程进入与该进程相关的临界区
  	B、不允许其他进程进入任何临界区
  	C、可以允许其他进程抢占处理器，但不得进入该进程的临界区
  	D、不允许任何进程抢占处理器
  ```

  ```txt
  5.进程A和进程B通过共享缓冲区协作完成数据处理，进程A负责产生数据并放入缓冲区，进程B从缓冲区读数据并输出。进程A和进程B之间的制约关系是（C  ）
  A、互斥关系			B、同步关系
  C、互斥和同步关系		D、无制约关系
  ```

  ```txt
  6.在操作系统中，P、V操作是一种（ D ）
  	A、机器指令		
  	B、系统调用命令
  	C、作业控制命令	
  	D、低级进程通信原语
  ```

  ```txt
  7.P操作可能导致（ C ）
  	A、进程就绪
  	B、进程结束
  	C、进程阻塞
  	D、新进程创建
  ```

  ```txt
  9在用信号量机制实现互斥时，互斥信号量的初值为（ B ）
  	A、0	B、1		C、2	D、3
  ```

  ```txt
  10.用P、V操作实现进程同步，信号量的初值为（ D ）
  A、-1	B、0		C、1		D、由用户确定
  ```

  ```txt
  11.可以被多个进程在任意时刻共享的代码必须是（  C）
  	A、顺序代码
  	B、机器语言代码
  	C、不允许任何修改的代码
  	D、无转移指令代码
  
  ```

  ```txt
  14.当一个进程因在互斥信号量mutex上执行V操作而导致唤醒另一个进程时，执行V操作后mutex的值为（ D ）
  	A、大于0		B、小于0
  	C、大于等于0	D、小于等于0
  
  ```

  ```txt
  16.对信号量S执行P操作后，使该进程进入资源等待队列的条件是（ A ）
  	A、S.value<0
  	B、S.value<=0
  	C、S.value>0
  	D 、S.value>=0
  ```

  ```txt
  17.如果系统有n个进程，则就绪队列中进程的个数最多有（ C ）个；阻塞队列中进程的个数最多有（  B）个。
  A、n+1	  B、n		C、n-1	D、1
  ```

  ```txt
  18.下列关于PV操作的说法正确的是（ B ）
  Ⅰ.PV操作是一种系统调用命令
  Ⅱ.PV操作是一种低级进程通信原语
  Ⅲ.PV操作是由一个不可被中断的过程组成
  Ⅳ.PV操作是由两个不可被中断的过程组成
  A、Ⅰ、Ⅲ		B、Ⅱ、Ⅳ
  C、Ⅰ、Ⅱ、Ⅳ	D、Ⅰ、Ⅳ
  ```

  ```txt
  19.有一个计数信号量S：
  1）假如若干个进程队S进行了28次P操作和18次V操作之后，信号量S的值为0。
  2）假如若干个进程对信号量S进行了15次P操作和2次V操作。请问此时有多少个进程等待在信号量S的队列中（ B ）。
  	A、2	B、3		C、5	D、7
  	
  对S进行了28次P操作和18次V操作，即S-28+18=0，得信号量的初值为10；然后，对信号量S进行了15次P操作和2次V操作，即S-15+2=10-15+2=-3，S信号量的负值绝对值表示等待队列中的进程数，所以有3个进程等待在信号量S的队列中。
  ```

  ```txt
  在9个生产者、6个消费者共享容量为8的缓冲器的生产者-消费者问题中，互斥使用缓冲器的信号量初始值为（ A）。
  	A、1	B、6	
      C、8	D、9
  ```

  ```txt
  有两个并发执行的进程P1和进程P2，共享初值为1的变量x。P1对x加1，P2对x减1。加1和减1操作的指令序列分别如下：
  	//加1操作				//减1操作
  	load R1,x  //取x到寄存器R1中		load R2,x  //取x到寄存器R2中
  	inc R1				dec  R2
  	store  x,R1  //将R1的内容存入x	store x,R2  //将R2的内容存入x
  两个操作完成后，x的值（  C ）
  A、可能为-1或3			B、只能为1
  C、可能为0、1或2		D、可能为-1、0、1或2
  
  ```

  ```txt
  下列关于管道（Pipe）通信的叙述中，正确的是（ C  ）。
  A、一个管道可实现双向数据传输
  B、管道的容量仅受磁盘容量大小限制
  C、进程对管道进行读操作和写操作都可能被阻塞
  D、一个管道只能有一个读进程或一个写进程对其操作
  ```

  ```txt
  下列选项中，会导致进程从执行态变为就绪态的事件是（ D  ）。
  A、执行P（wait）操作
  B、申请内存失败
  C、启动I/O设备
  D、被高优先级进程抢占
  ```

  # 第三章

  * ### 高级调度与低级调度的主要任务是什么？为什么要引入中级调度？

    高级调度的主要任务：根据某算法，把外存上处于后备队列中的那些作业调入内存

    低级调度室保存处理机的现场信息，按某种算法先取进程，再把处理器分配给进程。

    引入中级调度的主要目的是为了提高内存利用率和系统吞吐量。是那些暂时不能运行的进程不再占用内存资源，将他们调至外存等待，把进程状态改为就绪状态或挂起状态。

  * ### 处理机调度算法的共同目标是什么？批处理系统的调度目标是什么？

    共同目标：资源利用率、公平性、平衡性，策略强制执行

    批处理系统的调度目标：平均周转时间短，系统吞吐量高，处理机利用率高

* ### 在选择调度方式和调度算法时，应遵循的准则是什么？

  （1）面向用户的准则：周转时间短、响应时间快、截止时间的保证、优先权准则

  （2）面向系统的准则：系统吞吐量高、处理机利用率好、各类资源的平衡利用

* ###  在批处理系统、分时系统和实时系统中，各采用哪几种进程（作业）调度算法？

  批处理：短作业优先、优先权、高响应比优先、多级反馈队列调度算法

  分时系统的调度算法：时间片轮转法

  实时系统：最早截止时间优先（EDF）、最低松弛度优先（LLF）

* ### 何谓静态和动态优先级？确定静态优先级的依据是什么？

  静态优先级：在创建进程时，就将该进程的优先级确定下来，并且在整个运行过程中优先级保持不变

  动态优先级：在创建时赋予优先级，但是这个优先级可以随着进程的推进或时间等因素动态地改变，可以获得更好的调度性能

  依据：进程类型、进程对资源的需求’、用户的需求

* ### 为什么说多级反馈队列调度算法能较好地满足各方面用户的需要？

  对于终端型作业用户：他们提交的作业大多属于较小的交互型作业，系统只要使这些作业在第1级队列规定的时间片内完成，便可使终端型作业用户感到满意

  对于短批处理作业用户：对于这种作业，如果可载第一级队列中执行完成，便获得与终端作业一样的响应时间，对于稍长的短作业，也只需在第二和第三级队列各执行一段时间片完成，其周转时间仍然较短

  长批处理作业用户：对于长作业，它将依次在第1、2、3、4。。。n个队列中运行，然后再按轮转方式运行，用户不必担心其作业长期得不到处理

* ### 为什么在实时系统中，要求系统（尤其是CPU）具有较强的处理能力？

  实时系统中通常有多个实时任务，若处理机的处理能力不够强，有可能因为处理机忙不过来而使某些实时任务得不到及时处理，导致发生难以预料的后果。

* ### 何谓死锁，产生死锁的原因和必要条件是什么？

  死锁：多个进程在运行过程中因抢夺资源而造成的一种僵局，当进程处于这种僵持状态时，若无外力作用，他们将无法再向前推进

  原因：竞争资源和进程间推进顺序非法

  必要条件：互斥条件、请求和保持条件、不可抢占条件、循环等待条件

* ### 试说明可以通过哪些途径预防死锁？

  ①破坏“请求和保持条件”：保证当一个进程在请求资源时，它不能持有不可抢占资源。

  ​    方式一：在开始运行之前，必须一次性地申请其在整个运行过程中所需要的全部资源

  ​    方式二：允许一个进程只获得运行初期所需的资源后便开始运行，进程运行过程中再逐步释放已分配给自己的、且   	已用完的全部资源，然后再请求新的资源

  ②破坏“不可抢占条件”：当某个进程已经保持了一些不可抢占的资源并且提出新的资源请求得不到满足时，它必须释放所有已经保持的资源，待以后需要的时候再申请。

  ③破坏“循环等待条件”：将所有资源按类型排序标号，所有进程对资源的请求必须严格按序号递增的次序提出。

* ![](https://ws1.sinaimg.cn/large/0067fcixly1fyj1uhrtd3j30qz0im40h.jpg)

  （1）安全

  （2）不能

  **注意每次Available更新是等于  available + allocation**

```txt
一、选择题
(1)在三种基本类型的操作系统中，都设置了__C__，在批处理系统中还应设置__B__，在分时系统中除了__C__，通常还设置了___D___。
A.剥夺调度	B.作业调度	C.进程调度	D.中级调度

一、选择题
(2)我们如果为每一个作业只建立一个进程，则为了照顾短作业用户，应采用__B____；为照顾紧急作业的用户，应采用___E___；为能实现人机交互作用采用___C___；而能使短作业、长作业及交互作业用户都比较满意时，应采用___D___。
A.FCFS调度算法		B.短作业优先调度算法	
C.时间片轮转法		D.多级反馈队列调度算法
E.基于优先权调度算法

一、选择题
(3)产生死锁的基本原因是___B__和___A___，产生死锁的四个必要条件是互斥条件，___C___，不剥夺条件和____B__。
①A.资源分配不当		B.竞争资源	
    C.作业调度不当		D.资源的独占性
②A.进程推进顺序不当	B.进程调度不当	
    C.系统中进程太多		D.CPU运行不快
③A.请求和阻塞条件		B.请求和释放条件	
    C.请求和保持条件		D.释放和阻塞条件
④A.线性增长条件		B.环路等待条件	
    C.无序释放条件		D.有序请求条件

一、选择题
(4)实际操作系统，要兼顾资源的使用效率和安全可靠，对资源的分配策略，往往采用___D___策略。
A.预防死锁	B.避免死锁	C.检测死锁	D.三者的混合
(5)在下列死锁的解决办法中，属于预防死锁策略的是___B_。
A.银行家算法		B.资源有序分配法	
C.死锁检测法		D.资源分配图化简法

二、填空题
(1)资源的一次分配法和有序分配法分别破坏了产生死锁的必要条件中的____请求和保持条件___和___环路等待条件___，它们属于___预防死锁_，而银行家算法属于___避免死锁_。
(2)作业调度是从__后备作业队列__中选出一__批__作业，为它们分配__资源__，并为它们创建___进程_。

二、填空题
(3)最有利于提高系统吞吐量的作业调度算法是_短作业优先算法_；能对紧急作业进行及时处理的调度算法是_高优先权优先算法_；能较好的满足短作业用户要求，又能适当的照顾长作业，以及照顾作业到达次序的调度算法是_高响应比优先算法_。
(4)在高响应比优先的调度算法中，当各个作业的等待时间相同时，_短作业_将得到优先调度；当各个作业要求的运行时间相同时，_等待时间最长者_将得到优先调度。

```

```txt
三、应用题
1.设有三道作业，它们的提交时间和运行时间如下表：
	作业号	     提交时刻(时)	运行时间(小时)
     1		      10.00			2
     2		      10.10			1
     3		      10.25		    0.25
求：试给出下面两种调度算法下，作业的执行顺序、平均周转时间和平均带权周转时间。
(1)先来先服务FCFS调度算法
(2)短作业优先SJF调度算法
```

![](https://ws1.sinaimg.cn/large/0067fcixly1fyj3wvrp7kj30s20i4tbk.jpg)

![](https://ws1.sinaimg.cn/large/0067fcixly1fyj3x7k5rlj30se0hitbm.jpg)

```txt
三、应用题
2.设有四道作业，它们的提交时间和运行时间如下表：
作业号	提交时刻(时)		运行时间(小时)
     1		      8:00		         2.0
     2		      8:50		         0.5
     3		      9:00		         0.1
     4		      9:50		         0.2
求：试给出下面三种调度算法下，作业的执行顺序、平均周转时间和平均带权周转时间。
(1)先来先服务FCFS调度算法
(2)短作业优先SJF调度算法
(3)高响应比优先调度算法

```

![](C:\Users\ScorpioMiku\AppData\Roaming\Typora\typora-user-images\1545745883463.png)

![](C:\Users\ScorpioMiku\AppData\Roaming\Typora\typora-user-images\1545745836335.png)

![](https://ws1.sinaimg.cn/large/0067fcixly1fyjbwn5wmgj30tr0mzn2z.jpg)

```txt
注：
周转时间=完成时间-到达时间
平均周转时间=mean(周转时间)
带权周转时间=周转时间/服务时间
服务时间=需要运行的时间
高响应比优先调度算法： 权值 = （等待时间+要求服务时间）/（要求服务时间）

高响应比优先调度和短作业都是非抢占式的。选了一个就得做完
```

# 第四章

* ### 为什么要配置层次式存储器？

  设置多个存储器可以使存储器两端的硬件能并行工作，采用多级存储系统，特别是Cache技术，是减轻存储器带宽对系统性能影响的最佳结构方案，在微处理机内部设置各种缓冲存储器，减轻对存储器存取的压力。增加CPU中寄存器数量大大缓解对存储器的压力。

* ### 为什么引入动态定位，如何实现？

  原因：在多道系统环境下，编译程序不可能预知经编译后所得目标模块应放在内存的何处，而且在运行过程中程序在内存中的位置可能会经常改变，所以引入动态定位。

  实现：在系统中增加一个重定位寄存器，用来装程序在内存中的起始位置。执行时只需要通过起始位置加相对位置就能完成动态定位

* ### 什么是页表？页表的作用是什么？

  页表：在分页系统中，允许将进程的各个页离散地存储在内存的任一物理块中，为保证进程能找到每个页所对应的物理块，系统为每个进程建立了一张页面地址映射表。

  作用：实现页号到物理块号的地址映射

* ### 在分页系统中如何实现地址变换？

  _注意块表是存放的页号--地址，可以直接找到_

  当进程要访问某个逻辑地址中的数据时，分页地址变换机构会自动地将有效地址（相对地址）分为页号和页内地址两部分，再以页号为索引去检索页表。**查找由硬件执行**。在进行检索前，先将页号和页表长度进行比较，若页号大于页表长度，证明越界，若没有错误，则将**页表始址与页号和页表项长度的乘积相加**即可得到**该表项**对应的逻辑位置，以此来得到物理块位置。                                                                                                                                                                                                                                                                              

* ### 分页和分段存储管理有何区别

  ①页是信息的物理单位，段是信息的逻辑单位。采用分页是为了实现离散分配方式，以消减内存的外零头，提高利用率。采用分段主要在于能更好地满足用户的需求。

  ②页的大小固定且由系统决定，段的长度不固定，由用户编写的程序决定。

  ③分页的用户程序地址空间是一维的（因为每个页表项的长度是一致的），而分段是二维的，在给出段名的同时还得给出段长

  ```txt
  一、选择题
  (3)下列算法中产生“抖动”现象的是____A__。
  	A.先进先出页面置换算法(FIFO)	
  	B.最近最久未使用(LRU)置换算法	
  	C.最不经常使用(LFU)置换算法	
  	D.最佳(Optimal)置换算法
  (4)存储管理是对内存中__B____区域进行管理。
  	A.整个内存	 	 B.供用户使用的	 
  	C.供系统使用的	 D.供程序使用的
  
  (5)下面是关于存储器管理功能的论述，正确的论述是___A___和___D___。
  A.内存分配最基本的任务是为每道程序分配内存空间，其他追求的主要目标是提高存储空间的利用率。
  B.为了提高内存保护的灵活性，内存保护通常由软件实现。
  C.对换技术已不是现代操作系统中常用的一种技术。
  D.地址映射是指将程序空间中的逻辑地址变为内存空间的物理地址。
  E.虚拟存储器是在物理上扩充内存容量。
  
  (6)在下列存储管理方案中，不适用于多道程序的是___A___。
  A.单一连续分配		B.固定分区分配
  C.动态重定位分区分配	D.段页式存储分配
  (7)在固定分区存储管理中，每个分区的大小是___C___。
  A.相同的			B.可以不同但作业长度固定
  C.可以不同但预先固定	D.根据用户要求而定
  
  (8)在固定分区管理中，为了提高内存的利用率，可采用如下技术____A__。
  A.按经常出现的作业大小来划分分区
  B.划分分区都相同
  C.不同请求队列中的作业可以申请相同的分区	
  D.大作业可以申请多个分区
  
  一、选择题
  (9)采用固定分区管理的最大缺点是__C____。
  A.不利于内存的保护		B.分配算法复杂
  C.内存的利用率不高		D.零头太多
  (10)可变分区存储管理采用的地址变换公式是___C___。
  A.绝对地址 = 上界寄存器值 + 逻辑地址
  B.绝对地址 = 下界寄存器值 + 逻辑地址
  C.绝对地址 = 重定位寄存器值 + 逻辑地址
  D.绝对地址 = 块号×块长 + 页内地址
  
  一、选择题
  (11)对外存对换区的管理以___D___为主要目标，对外存文件区的管理以___B___为主要目标。
  A.提高系统吞吐量		B.提高存储空间的利用率
  C.降低存储费用		D.提高换入换出速度
  (12)使用页式存储管理使处理器执行指令的速度__B____。
  A.提高		B.降低		C.不定		D.不受影响
  
  一、选择题
  (13)段式存储管理中，分段是由用户决定的，因此___B__。
  A.段内地址和段间的地址都是连续的		
  B.段内地址是连续的，而段间的地址是不连续的
  C.段内地址是不连续的，而段间的地址是连续的
  D.段内地址和段间的地址都是不连续的
  
  分区分配内存管理方式的主要保护措施是（  A ）
  A、界地址保护		B、程序代码保护
  C、数据保护		D、栈保护
  每个进程都拥有自己独立的进程空间，如果一个进程在运行时所产生的地址在其地址空间之外，则发生地址越界，因此需要进行界地址保护，即当程序要访问某个内存单元时，由硬件检查是否允许，如果允许则执行，否则产生地址越界中断。
  
  一个分段储存管理系统中，地址长度为32位，其中段号占8位，则最大段长是（ C ）
  A、28字节		B、 216字节
  C、 224字节	D、 232字节
  
  某基于动态分区储存管理的计算机，其主存容量55MB（初始为空），采用最佳适配（Best Fit）算法，分配和释放的顺序为：分配15MB，分配30MB，释放15MB，分配8MB，分配6MB，此时主存中最大空闲分区的大小是（ B  ）
  	A、7MB		B、9MB	
  	C、10MB		D、15MB
  	
  在虚拟内存管理中，地址变换机构将逻辑地址变换为物理地址，形成该逻辑地址的阶段是（   C ）
  A、编辑			B、编译
  C、链接			D、装载
  注意审题，如果题目是“完成该变换过程的阶段是”，那就可以选D了。
  
  
  某计算机采用二级页表的分页储存管理方式，按字节编址，页大小为210字节，页表项大小为2字节，逻辑地址结构为
  逻辑地址空间大小为216页，则表示整个逻辑地址空间的页目录表中包含表项的个数至少是（  B ）
  A、64	B、128	C、256	D、512
  页大小为210B，页表项大小为2B，故一页可以存放29个页表项，逻辑地址空间大小为216页，即共需216个页表项，则需要216/29=27=128个页面保存页表项，即页目录表中包含表项的个数至少是128.
  
  现有一个容量为10GB的磁盘分区，磁盘空间以簇（Cluster）为单位进行分配，簇的大小为4KB，若采用位图法管理该分区的空闲空间，即用一位（bit）标识一个簇是否被分配，则存放该位图所需簇为（  A  ）个。
  A、80				B、320
  C、80K			D、320K
  簇的总数为10GB/4KB=2.5M，用一位标识一簇是否被分配，则整个磁盘共需要2.5M位，即需要2.5M/8=320KB，则共需要320KB/4KB=80个簇，选A。
  
  下列选项中，属于多级页表优点的是(  D   ) 
  A、加快地址变换速度
  B、减少缺页中断次数
  C、减少页表项所占字节数
  D、减少页表所占的连续内存空间
  
  某计算机按字节编址，其动态分区内存管理采用最佳适应算法，每次分配和回收内存后都对空闲分区链重新排序。当前空闲分区信息如下表示。
  分区起始地址	20K	   500K	  1000K	   200K
  分区大小	40KB	80KB	100KB	200KB
  回收起始地址为60K、大小为140KB的分区后，系统中空闲分区的数量、空闲分区链第一个分区的起始地址和大小分别是（  B  ）
  A. 3、20K、380KB		B. 3、500K、80KB
  C. 4、20K、180KB		D. 4、500K、80KB
  
  
  (1)在分区分配的算法中，首次适应算法倾向于优先利用内存中的___低地址___部分的空闲分区，从而保留了___高地址___部分的空闲分区。
  (2)地址变换机构的最基本任务是将____用户地址空间___中的__逻辑地址__变换为___内存空间__中的__物理地址__。在分页系统中为实现地址变化而设置了页表寄存器，其中存放了__页表始址__和_页表长度_，在进程未运行时，它们存放在__进程的PCB__中。在分页系统中进行地址变换时，应将页表寄存器中的__页表始址__和__页号与页表长度的乘积_进行相加，得到该页的页表项位置，从中可得到__物理块号__。
  ```

  ```txt
  二、填空题
  ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
  (3)假定某分页存储管理的系统中，内存容量为1MB，被分成256块，块号为0,1,2,…,255，某作业的地址空间占4页，其页号为0,1,2,3，被分配到内存的第2,4,1,5块中。
  则有①内存地址应使用____20____位来表示。
  ②作业每一页的长度为__2^(20-8)=2^12=4KB_______，逻辑地址中的页内地址应用____12____位。
  ③把作业中每一页在分到的内存块中的起始地址填入下表：
  页号		起始地址		页号		起始地址
  0		2×4KB = 8KB		  2		  1×4KB = 4KB
  1		4×4KB = 16KB	  3		  5×4KB = 20KB
  
  
  三、应用题
  1.一个由4个页面(页号0~3)，每页由1024个字节组成的程序，把它装入一个由8个物理块(块号0~7)组成的存储器中，装入情况如表所示：
      页号			物理块号
       0				3
       1				5
       2				6
       3				2
  已知下面的逻辑地址(其中方括号中的第一个元素为页号，第二个元素为页内地址)，请按页表求出对应的物理地址。
      (1) [0,100]     → 物理地址：3×1024 + 100 = 3172
      (2) [1,179]		→ 物理地址：5×1024 + 179 = 5299
      (3) [2,785]		→ 物理地址：6×1024 + 785 = 6929
      (4) [3,1010]	→ 物理地址：2×1024 + 1010 = 3058
      
  三、应用题
  2.设一个逻辑地址空间有8个页面，每页大小为1024B，现将它映像到32块物理块的内存上。
  试问：(1)逻辑地址要用多少位表示：____23×210  共13位__
  	(2)物理地址要用多少位表示：_____25×210  共15位__
  
  
  三、应用题
  3.某段式存储管理中采用如下表所示的段表。
  段号	段的长度	内存起始地址
  0		660			219
  1		14			3330
  2		100			90
  3		580			1237
  4		96			1954
  试问：(1)给定段号和段内地址，说明段式管理中的地址变换过程。
  		找到对应段号，比较段内地址若大于段长则溢出，否则就用内存起始地址加上段内地址就行
  	(2)计算[0,430], [1,10], [2,500], [3,400], [4,20], [5,100]的内存地址，其中方括号内的第一元素是		段号，第二元素是段内地址。
  		→ 物理地址：219 + 430 = 649
          → 物理地址：3330 + 10 = 3340
          → 物理地址：500 > 100  段内地址越界!
          → 物理地址：1237 + 400 = 1637
          → 物理地址：1952 + 20 = 1972
          → 物理地址：5 > 4         段号越界!
  	(3)说明存取主存中的一条指令或数据至少要访问几次主存。
  		两次：一次访问段表，另一次是访问需要指令或数据。
  ```

# 第五章

* ### 虚拟存储器有哪些特征？其中最本质的特征是什么？

  虚拟存储器有多次性、对换性、虚拟性、离散性四大特征。最本质的特征是**虚拟性**

  多次性：不需要运行时一次性地全部装入内存，而是运行被分成多次调入内存运行。

  对换性：一个作业中的程序和数据，无须在作业运行时一直常驻内存，而是允许在作业的运行过程中进行进行换进换出。

  虚拟性：能够从逻辑上扩充内存容量，使用户看到的内存容量远大于实际容量。

  离散性：在内存中是离散存放的

* ### 在请求分页系统中，常采用哪几种页面置换算法？

  ①最佳置换算法 ： 理论上的，每次替换只会替换掉不会再用的或者最久后才会用到的

  ②先进先出置换算法 ： 先进先出

  ③最近久未使用置换算法（LRU） ：  赋予每个页面一个访问字段，用来记录距上一次访问所经过的时间，每次换掉t最大的      （这个算法和①的区别在于，这个是根据已经发生的来定的，而①是根据未来发生的所定的）

  ④clock置换算法  ： 连成一个链表，为每个item设置一个访问位，当某页面被访问时，访问位置为1。每次计算淘汰时开始遍历链表，如果是1就置为0，如果是0就换掉。**改进型clock法则是多添加一个访问位用来记录是否被修改过，淘汰顺序为：00 -> 01 -> 10 （第一位是访问值，第二个为修改值）**

  ⑤最少使用置换算法 ： 为每一个页面设置一个移位寄存器，用来记录被访问的次数，每次淘汰值最小的。

  ⑥页面缓冲算法 ： 创建两个链表：

   * 第一个是**空闲页面链表**，读入页面时，将其放入该表第一个物理块，当有页换出时也是将其放入该链表的尾部（这些页都是有数据的），这样以后再用到时直接换出就行，不用再从磁盘读入数据了。
   * 第二个是**修改页面链表**，当一个已经修改过的页面换出时，就放进来。还是降低磁盘的读写频率

* ### 在一个请求分页系统中，采用LRU 页面置换算法时，假如一个作业的页面走向为4 , 3 , 2 ,1 , 4 , 3 , 5 , 4 ,3 , 2 , 1 ,5，当分配给该作业的物理块数M分别为3和4时，试计算访问过程中所发生的缺页次数和缺页率 ?

  自己看答案

* ### 页面缓冲算法的主要特点是什么？它是如何降低页面换进、换出的频率的？

  特点：①显著地降低了页面换进、换出的频率，以此来显著降低了磁盘的读写频率，减小开销

  ​	   ②因为减小了开销，就可以使用一些简单的置换策略，实现起来就简单不少

  如何：创建一个空闲页面链表和一个修改页面链表，在读入页面和换出未修改的页面时直接放进空闲页面链表，换出修改后的页面时就放进修改页面链表里，以后再需要时就只需要从相应的链表里取出即可，减少了磁盘的读写频率

* ### 在请求分页系统中，产生“抖动”的原因是什么？

  抖动是因为在页面系统中，页在内存和外存之间频繁调度，导致调度时间过多，而产生了抖动。

  具体原因有：①分配给进程的物理块太少，不能满足进程正常运行的要求

  ​		      ②页面淘汰算法不太合理

  ```txt
  一、选择题
  (1)在请求分页管理中，在页表中增加了若干项，其中状态位供___C___时参考，修改位供__D____时参考，访问字段供__B____时参考，外存地址供___E___时参考。
  A.分配页面		B.置换算法		C.程序访问
  D.换出页面		E.调入页面
  
  (2)请求页式管理中，缺页中断率与进程所得的内存页面数、___B___和____C__等因素有关。
  	A.页表的位置		B.置换算法		
  	C.页面大小		D.进程调度算法
  (3)请求分页管理中，页面的大小与可能产生的缺页中断次数__B____。
  A.成正比	B.成反比	C.无关		D.成固定比值
  
  (4)下列说法正确的是___B___。
  A.在请求段页式系统中，以页为单位管理用户的虚拟空间，以段为单位管理内存空间	
  B.在请求段页式系统中，以段为单位管理用户的虚拟空间，以页为单位管理内存空间
  C.为提高请求分页系统中内存的利用率，允许用户使用不同大小的页面
  D.在虚拟存储器中，为了能让更多的作业同时运行，通常只应装入10%的作业后便启动运行
  
  (5)在下面的存储管理方案中，可以使用上下界地址寄存器实现存储保护的是___A___和___B___。
  A.固定分区存储分配		B.可变分区存储分配
  C.页式存储分配		D.段式存储分配
  
  
  在缺页处理过程中，操作系统执行的操作可能是（   D ）
  Ⅰ.修改页表	Ⅱ.磁盘I/O		Ⅲ.分配页框
  A、仅Ⅰ、Ⅱ			B、仅Ⅱ
  C、仅Ⅲ			D、Ⅰ、Ⅱ和Ⅲ
  
     当系统发生抖动（Thrashing）时，可用采取的有效措施是（  A  ）
  Ⅰ.撤销部分进程
  Ⅱ.增加磁盘交换区的容量
  Ⅲ.提高用户进程的优先级
  A、仅Ⅰ			B、仅Ⅱ
  C、仅Ⅲ		D、仅Ⅰ、Ⅱ
  
  下列关于虚拟存储器的叙述中，正确的是（  B  ）
  A、虚拟存储只能基于连续分配技术
  B、虚拟存储只能基于非连续分配技术
  C、虚拟存储容量只受外存容量的限制
  D、虚拟储存容量只受内存容量的限制
  如果采用连续分配，那么必须一次性全部给出所需空间，自然达不到目的
  有以下三种实现方式；①请求分页存储管理；②请求分段存储管理；③请求段页式存储管理。虚拟存储容量既不受外存容量限制，也不受内存容量限制，而是由CPU的寻址范围决定的。
  
  
     若用户进程访问内存时产生缺页，则下列选项中，操作系统可能执行的操作是（ B   ）
  Ⅰ.处理越界错
  Ⅱ.置换页
  Ⅲ.分配内存
  A、仅Ⅰ、Ⅱ		B、仅Ⅱ、Ⅲ
  C、仅Ⅰ、Ⅲ		D、Ⅰ、Ⅱ和ⅢB
  
  
     下列措施中，能加快虚实地址转换的是（  C  ）
  Ⅰ.增大快表（TLB）容量
  Ⅱ.让页表常驻内存
  Ⅲ.增大交换区（swap）
  A、仅Ⅰ			B、仅Ⅱ
  C、仅Ⅰ、Ⅱ		D、仅Ⅱ、Ⅲ
  
     在页式虚拟存储器管理系统中，采用某些页面置换算法，会出现Belady异常现象，即进程的缺页次数会随着分配给该进程的页框个数的增加而增加。下列算法中，可能出现Belady异常现象的是（   A ）。
  Ⅰ. LRU算法	Ⅱ. FIFO算法	Ⅲ. OPT算法
  A、仅Ⅱ			B、仅Ⅰ、Ⅱ
  C、仅Ⅰ、Ⅲ		D、仅Ⅱ、Ⅲ
  
  
  	在请求分页系统中，页面分配策略和页面置换策略不能组合使用的是（  C  ）。
  A、可变分配，全局置换
  B、可变分配、局部置换
  C、固定分配、全局置换
  D、固定分配，局部置换
  固定/可变：每个进程分配的物理块的数量是否可以动态修改
  全局/局部：置换时选取的对象（局部是在当前进程里选，全局是在所有进程里选）
  
  (3)为实现请求分页管理，应在页表中增加____状态位____、_____访问字段_____、____修改位____、__外存地址__
  
  ★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★★
  1.某虚拟存储器的用户空间共32个页面，每页1KB，主存16KB。
  试问：(1)逻辑地址的有效位是___15___位；  2^5×2^10  共15位
  	(2)物理地址需要___14___位；    2^4×2^10  共14位
  	(3)假定某时刻系统为用户的第0,1,2,3页分别分配的物理块号为5,10,4,7，试将逻辑地址0A5CH和093CH变换为物理地址。
  方法一:
  换成十进制 093C=2364
  [2364/1024]=2......虚页号
  2364-2*1024=316.....页内偏移地址
  虚页号为2对应的物理块号为4
  所以物理地址为4*1024＋316＝4412，换成16进制就是，113C
  方法二:
  换成二进制 093C=0000100100111100
  后10位(0100111100)是页内偏移地址000010是虚页号,将000010替换为对应的物理块号000100,得到0001000100111100即为物理地址,换成16进制,还是113C
  ```

# 第六章

* ### 简要说明I/O软件的四个层次的基本功能

  ①用户层I/O软件：实现与用户的交互的接口，用户可以直接调用该层提供的与I/O操作相关的库函数

  ②设备独立性软件：用于实现用户程序与设备驱动器的统一接口、设备命名、设备保护以及设备的分配与释放等。同时为设备管理和数据传送提供必要的储存空间

  ③设备驱动程序：与硬件直接相关，用于具体实现系统对设备发出的操作指令，驱动I/O设备工作的驱动程序

  ④中断处理程序：用于保存被中断进程的CPU环境，转入相应的中断处理程序进行处理，处理完毕在回复被中断的现场后，返回到被中断的进程

* ### 与设备无关性的基本含义是什么？为什么要设置该层？

  含义：应用程序独立于具体使用的物理设备

  为什么：①用户不仅可以使用抽象的I/O命令，还可以使用抽象的逻辑设备名来使用设备

  ​	       ②可以有效地提高OS的可移植行和易适用性，对于OS本身而言，应允许在不需要将整个操作系统重新编译	

  ​		的情况下，增添新的设备驱动程序，以方便新的I/O设备的安装

* ###  为什么说中断是OS赖以生存的基础？

  ①进程之间的切换是通过中断来完成的，它是多道程序得以实现的基础

  ②为了提高处理机的利用率和实现CPU和I/O设备并行执行，也必须要有中断，所以它也是设备管理的基础

  ③中断处理是I/O系统中最低的一层，它是整个I/O的基础

* ### 试说明推动I/O控制发展的主要因素是什么？

  ①应减少主机对I/O控制的干预，把主机从繁杂的I/O控制事务中解脱出来

  ②中断机制的引入、DMA控制器的出现和通道研制的成功为I/O控制打下了基础

* ###  为什么要引入与设备的无关性，应如何实现设备的独立性？

  原因：①提高系统的可适应性和可扩展性

  ​	   ②设备分配灵活

  ​	   ③易于实现I/O的重定向

  如何实现：应引入逻辑设备和物理设备概念，在应用程序中，使用逻辑设备名请求使用某类设备，系统执行时使用物理设备名。因为驱动程序是与硬件或设备紧密相连的软件，必须在驱动程序之上设置一层设备独立性软件，执行所有设备的共有操作、完成逻辑名到物理设备名的转换、并想用户层软件提供统一接口，从而实现设备的独立性。



  ​	I/O重定向：用于捕获一个文件、命令、程序或脚本甚至代码块的输出，然后把捕获到的输出作为输入发送给另外一个文件、命令、程序或脚本等。I/O重定向最常用的方法是管道（管道符"|"）。

* ### 何谓虚拟设备？实现设备虚拟时所依赖的关键技术是什么？

  虚拟设备：指把独占设备经过某种技术处理改造成虚拟设备

  关键技术：SPOOLING技术

* ###  假脱机系统向用户提供共享打印机的基本思想是什么？

  基本思想是虚拟设备技术，具体打印过程以及实现思路如下：

  ①在磁盘上开辟一个用来缓冲的存储空间，用来暂存用户的输出数据

  ②为用户进程申请一张空白的请求打印表，由用户填入打印要求。

  ③由假脱机管理进程为每个请求打印的用户建立一个假脱机文件，并将请求表挂到该文件上，并将各自的假脱机文件放入假脱机文件队列中

  ④由假脱机打印进程从队列队首开始摘取，将要打印的数据由输出井传送到内存缓冲区，再交付打印机打印。

* ###  目前常用的磁盘调度算法有哪些？每种算法优先考虑的问题是啥？

  ①先来先服务：优先考虑请求访问的先后次序

  ②最短寻道时间优先：优先考虑 请求访问的磁道与当前磁头所在的磁道距离是否最近

  ③扫描算法：考虑请求磁道是否与当前磁道的距离+磁头当前移动的方向（后者更看重）

* ### 设备管理中引入缓冲机制的主要原因：

  ①缓和CPU与I/O设备之间的速度不匹配的矛盾

  ②减少中断次数和CPU的中断处理

  ③提高CPU与I/O设备的并行性

```txt
★★★★★★★★★★★★★★★★★★*********************这里的题很容易错**************************************
(3)为了使多个进程能有效的同时处理I/O，最好使用___A___结构的缓冲技术。
A.缓冲池	B.单缓冲区	C.双缓冲区	D.循环缓冲区
(4)磁盘属于①___C___，信息的存取是以②___D___单位进行的，磁盘的I/O控制主要采取③___C___方式，打印机的I/O控制主要采取③____B__方式。
①A.字符设备	    B.独占设备	    C.块设备	D.虚存设备 
②A.位(bit)	    B.字节	    C.桢		D.固定数据块 
③A.循环测试	    B.程序中断	    C.DMA	D.SPOOLing 

一、选择题
(5)下面关于设备属性的论述中正确的为___B___。
A.字符设备的一个基本特征是不可寻址的，即能指定输入时的源地址和输出时的目标地址	
B.共享设备必须是可寻址的和可随机访问的设备
C.共享设备是指在同一时刻内，允许多个进程同时访问的设备
D.在分配共享设备和独占设备时，都可能引起进程死锁

一、选择题
(7)通道是一种特殊①___C___，具有②____A__能力，它用于实现③____A__之间的信息传输。
①A.I/O设备	    B.设备控制器	C.处理机	D.I/O控制器 
②A.执行I/O指令集	    	B.执行CPU指令集	    
　C.传输I/O指令		D.运行I/O进程 
③A.内存与外设	    	B.CPU与外设	    
    C.内存与外存		D.CPU与外存 
    
一、选择题
(8)为实现设备分配，应为每类设备设置一张①__A____，在系统中配置一张①___C___，为实现设备的独立性，系统中应设置一张②___D___。
①A.设备控制表	    	B.控制器控制表	
    C.系统设备表		D.设备分配表 
②A.设备开关表	    	B.I/O请求表	    
　C.系统设备表		D.逻辑设备表 

(9)下面不适合于磁盘调度算法的是__D____。
A.FCFS			B.SCAN	
C.CSCAN			D.时间片轮转算法

用户程序发出磁盘I/O请求后，系统的正确处理流程是（  B  ）。
A、用户程序→系统调用处理程序→中断处理程序→设备驱动程序
B、用户程序→系统调用处理程序→设备驱动程序→中断处理程序
C、	用户程序→设备驱动程序→系统调用处理程序→中断处理程序
D、用户程序→设备驱动程序→中断处理程序→系统调用处理程序
输入/输出软件一般从上到下分为四个层次：用户层、与设备无关的软件层、设备驱动程序以及中断处理程序。与设备无关的软件层也就是系统调用的处理程序。
当用户使用设备时，首先在用户程序中发起一次系统调用，操作系统的内核接到该调用请求后调用处理程序进行处理，再转到相应的设备驱动程序，当设备准备好或所需数据到达后设备硬件发出中断，将数据按上述调用顺序逆向回传到用户程序中。

用户程序发出磁盘I/O请求后，系统的处理流程是：用户程序→系统调用处理程序→设备驱动程序→中断处理程序。其中，计算数据所在磁盘的柱面号、磁头号、扇区号的程序是（   C  ）。
A、用户程序			B、系统调用处理程序
C、	设备驱动程序			D、中断处理程序

系统将数据从磁盘读到内存的过程包括以下操作：
①DMA控制器发出中断请求	
②初始化DMA控制器并启动磁盘
③从磁盘传输一块数据到内存缓冲区
④执行“DMA结束”中断服务程序
正确的执行顺序是（ B   ）。
A、③→①→②→④		B、 ②→③→①→④ 
C、	②→①→③→④		D、 ①→②→④→③
2 3 1 4 
注意：中断请求是在缓冲区内有数据后才发出的！不然CPU处理啥？


程序员利用系统调用打开I/O设备时，通常使用的设备标识是（  A  ）。
A、逻辑设备名		B、物理设备名
C、主设备号		D、从设备号

某文件占10个磁盘块，现要把该文件磁盘块逐个读入主存缓冲区，并送用户区进行分析，假设一个缓冲区与一个磁盘大小块大小相同，把一个磁盘块读入缓冲区的时间为100us，将缓冲区的数据传送到用户区的时间是50us，CPU对一块数据进行分析的时间为50us。在单缓冲区和双缓冲区结构下，读入并分析完该文件的时间分别是（ B   ）。
A、1500us、1000us		B、1550us、1100su
C、1550us、1550us		D、2000us、2000us
在单缓冲区中，当上一个磁盘块从缓冲区读入用户区完成时，下一磁盘块才能开始读入，也就是当最后一块磁盘块读入用户区完毕时所用时间为150*10=1500us，加上处理最后一个磁盘块的时间50us，得1550us。
双缓冲区中，不存在等待磁盘块从缓冲区读入用户区的问题，10个磁盘块可以连续从外存读入主存缓冲区，加上将最后一个磁盘块从缓冲区送到用户区的传输时间50us以及处理时间50us，也就是100*10+50+50=1100us。


下列选项中，不能改善磁盘设备I/O性能的是（  B  ）。
A、重排I/O请求次序	B、在一个磁盘上设置多个分区
C、预读和滞后写	D、优化文件物理块的分布
对于A，重排I/O请求次序也就是I/O调度，从而使进程之间公平地共享磁盘访问，减少I/O完成所需要的平均等待时间。
对于C，缓冲区结合预读和滞后写技术对于具有重复性及阵发性的I/O进程改善磁盘I/O性能很有帮助。
对于D，优化文件物理块的分布可以减少寻找时间与延迟时间，从而提高磁盘性能。
在一个磁盘上设置多个分区与改善设备I/O性能并无多大联系，相反还会带来处理的复杂和降低利用率。


在系统内存中设置磁盘缓冲区的主要目的是（  A  ）。
A、减少磁盘I/O次数		B、减少平均寻道时间
C、提高磁盘数据可靠性	D、实现设备无关性


下列关于SPOOLing技术的叙述中，错误的是（  D  ）。
A、需要外存的支持		
B、需要多道程序设计技术的支持
C、可以让多个作业共享一台独占设备
D、由用户作业控制设备与输入/输出井之间的数据传送
是由系统控制的


下列选项中， 磁盘逻辑格式化程序所做的工作是（ B   ）。
Ⅰ.对磁盘进行分区
Ⅱ.建立文件系统的根目录
Ⅲ.确定磁盘扇区校验码所占位数
Ⅳ.对保存空闲磁盘块信息的数据结构进行初始化
A、仅Ⅱ		B、仅Ⅱ、Ⅳ
C、仅Ⅲ、Ⅳ	D、仅Ⅰ、Ⅱ、Ⅳ
一个新的磁盘是一个空白版，必须分成扇区以便磁盘控制器能读和写，这个过程称为低级格式化（或物理格式化）。
低级格式化为磁盘的每个扇区采用特有的数据结构，包括检验码，Ⅲ错误。
为了使用磁盘存储文件，操作系统还需要将自己的数据结构记录在磁盘上。这分为两步。第一步是将磁盘分为由一个或多个柱面组成的分区，每个分区可以作为一个独立的磁盘，Ⅰ错误。
在分区之后，第二步是逻辑格式化（创建文件系统）。在这一步操作系统将初始的文件系统数据结构存储到磁盘上。这些数据结构包括空闲和已分配的空间和一个初始为空的目录，Ⅱ、Ⅳ正确。
所以选B


在大型机系统中，主机通常是通过___通道___和____设备控制器_____与外设相连。


二、填空题
(2)操作系统中通常采用的I/O控制方式有_____程序I/O方式___、______中断驱动I/O控制方式____、___DMA控制方式________和______I/O通道控制方式_______。在对打印机进行I/O控制时，通常采用_______中断驱动I/O控制方式
_____，对磁盘的I/O控制采用___DMA_____控制方式，而DMA是指允许____外部设备______与___内存___之间直接交换数据的控制器，在DMA中必须设置地址寄存器，用于存放_____内存地址_____。

(3)SPOOLing系统是由磁盘中的___输出井__和___输入井___，内存中的____输入缓冲区____和____输出缓冲区___，以及___输入进程__和___输出进程__所构成。SPOOLing是对脱机I/O工作方式的模拟，SPOOLing系统中的__输入井__和__输出井__是对脱机输入输出中的磁盘进行模拟，___输入进程__和___输出进程__是对脱机输入输出中的外围控制机进行模拟。


三、应用题
        假定一磁盘有200个柱面，编号为0~199，在完成了磁道125处的请求后，当前正在磁道143处为一个请求服务。若请求队列的先后顺序为86,147,91,177,94,150,102,175,130.
        试分别采用FCFS(先来先服务)、SSTF(最短寻道时间优先)、SCAN(扫描)和CSCAN(循环扫描)算法完成上述请求，写出磁头移动的顺序，并计算存取臂移动总量。
FCFS:先来先服务
SSTF:每次都找最近的服务
SCAN：电梯算法——每次都只找某一方向最近的服务
CSCAN：在SCAN的基础上保证方向的不变性，也就是说每次到末尾后从头开始：80 100 120 170 | 0 60 70.....
```

# 第七章

* ### 何谓数据项、记录和文件？

  数据项： 分为基本数据项和组合数据项       （属性）

  ​		基本数据项：描述一个对象某种属性的字符集，有数据名、数据类型和数据值三个特征  

  ​		组合数据项：由若干基本数据项构成

  记录：一组相关数据项的集合，用于描述一个对象某方面的属性。（类）

  文件：由创建者所定义的、具有文件名的一组相关元素的集合

* ### 文件系统的模型可分为三层，试说明其每一层所包含的基本内容

  第一层：对象及其属性，对象有文件、目录、磁盘存储空间

  第二层：对对象操纵和管理的软件集合，一般包含I/O控制、基本文件系统、基本I/O管理程序、逻辑文件系统

  第三层：文件系统的接口，包含命令接口、程序接口

* ### 与文件系统有关的软件可分为哪几个层次？

  ①I/O控制层，是文件系统的最底层，主要由磁盘驱动程序等组成

  ②基本文件系统层：主要用于处理内存与磁盘指尖的数据块的交换

  ③基本I/O管理程序：用于完成与磁盘I/O有关的事务

  ④逻辑文件系统：用于处理与记录和文件相关的操作。

* ### 何谓文件的逻辑结构？何谓文件的物理结构？

  逻辑结构：从用户观点出发所观察到的文件组织形式，是用户可以直接处理的数据及其结构，独立于文件的物理特性

  物理结构：指系统将文件存储在外存上锁形成的一种存储组织形式，是用户看不见的。

* ### 试说明索引文件和索引顺序文件的检索方法

  索引文件：所限根据用户提供的关键字，利用折半查找法检索索引表。找到相应表项，再根据得到的指针值进行访问

  索引顺序文件：首先利用用户提供的关键字及查找方法，检索索引表，找到该记录在记录组中的第一条记录表项，得到第一个记录在主文件中的位置，再利用顺序查找法查找主文件，找到所要求的记录

* ### 基于符号链接的文件共享方式有何优点？

  不会因为删除一共享文件后留下一悬空指针的情况，并且可以通过网络连接世界上任何地方计算机中的文件。

```txt
1、文件系统在创建一个文件时，为它建立一个（  A  ）。  #注意A和B
     A、文件目录                B、目录文件
     C、逻辑结构                D、逻辑空间
2、如果文件系统中有两个文件重名，不应采用（  A ）。
     A、一级目录结构            B、树型目录结构
     C、二级目录结构            D、A和C
3、文件系统采用二级文件目录可以（  D   ）。
     A、缩短访问存储器的时间    
	 B、实现文件共享
     C、节省内存空间            
	 D、解决不同用户间的文件命名冲突 
4、文件代表了计算机系统中的（  C ）。
     A、硬件                     B、软件
	 C、软件资源        	 D、硬件资源
5、特殊文件是与(  C   )有关的文件。
     A、文本           			 B、图象
	 C、硬件设备      		 D、二进制数据
6、文件的存储方法依赖于（   C ）。
   	A、文件的物理结构     
	B、存放文件的存储设备的特性
    C、A和B                   D、文件的逻辑

9、目录文件所存放的信息是（  D  ）。
     A、某一文件存放的数据信息
     B、某一文件的文件目录
     C、该目录中所有数据文件目录
     D、该目录中所有子目录文件和数据文件的目录 

10、（ A  ）是指有关操作系统和其他系统程序组成的文件。
     A、系统文件        		B、档案文件
     C、用户文件        		D、顺序文件
11、按文件用途来分，编辑程序是（  A  ）。    ★★★★★易错
     A、系统文件        		B、档案文件
     C、用户文件        		D、库文件
12、由字符序列组成，文件内的信息  不再划分结构，这是指（   A）。★★★★★易错
     A、流式文件        		B、记录式文件
     C、顺序文件        		D、有序文件

13、Autoexec.bat文件的逻辑结构形式是（  A ）。
     A、字符流式文件     		B、库文件
     C、记录式文件       		D、只读文件
14、数据库文件的逻辑结构形式是（ C  ）。
     A、字符流式文件      	B、档案文件
     C、记录式文件       		D、只读文件
15、逻辑文件是（  B  ）的文件组织形式。
     A、在外部设备上       	B、从用户观点看
     C、虚拟存储    		D、目录 
     
16、为了对文件系统中的文件进行安全管理，任何一个用户在进入系统时都必须进行注册，这一级管理是(    A   )安全管理。
      A、系统级                B、用户级
      C、目录级                D、文件级
17、文件的二级目录结构由(　A　)和(　D　)组成。    #注意这里用户文件目录而不是用户目录。 如果是文件目录也对
　　 A、主文件目录　　　    B、子目录
 　   C、根目录　              	D、用户文件目录
18、文件系统采用多级目录结构后，对于不同用户的文件，其文件名(　C　)。
　  A、应该相同 　　            B、应该不同
 　 C、可以相同，也可以不同 　　D、受系统约束
19、文件目录是(    D   )的有序集合。  ######—★★★★★—容易错———————#######
     A、文件控制块           B、文件名
     C、文件目录项           D、文件信息
20、下列哪一项不是文件系统的功能(   C  )。
     A、文件系统实现对文件的按名存取
     B、负责实现数据的逻辑结构到物理结构的转换
     C、提高磁盘的读写速度
     D、提供对文件的存取方法和对文件的操作
21、文件系统的主要目的是(  C   )。
  A、实现虚拟存储管理 　    B、用于存储系统文档
  C、实现对文件的按名存取 　  D、实现目录检索 

22、在文件系统中，下列关于当前目录(工作目录)的叙述中，不正确的是(  B  )。
  A、提高文件目录检索速度  B、减少启动硬盘的次数
 C、利于用全路径名查找文件  D、当前目录可以改变
23、对磁盘上的索引文件可能采取的存取方式为(   C    )。
    A、只有顺序存取	        B、只有随机存取
   C、顺序存取和随机存取	D、都不是
24、对于下列文件的物理结构，(   B   )只能采用顺序存取方式。
     A、顺序文件 　　            B、链接文件
    C、索引文件 　                 D、Hash文件 

25、文件系统中若文件的物理结构采用顺序结构，则文件控制块FCB中关于文件的物理位置应包括(    B   )。
   A、只有首块地址  		B、首块地址和文件长度
   C、首块地址和索引表地址    D、文件长度和索引表地址
26、操作系统为保证未经文件拥有者授权，任何其它用户不能使用该文件所提供的解决方法是(    B   )。
 	A、文件保护          B、文件保密
 	C、文件转储          D、文件共享
27、文件系统中文件被按照名字存取是为了(   B   )。 
	A、方便操作系统对信息的管理 
	B、方便用户的使用
  	C、确定文件的存取权限 
  	D、加强对文件内容的保密 

33、操作系统对系统中的数据进行管理的部分通常叫做(    B  )。
     A、数据库系统  	       	B、文件系统
     C、数据存储系统               D、数据结构 
     
34、如果将存储设备上的目录文件分为两级, 就形成了二级目录结构. 第一级作为系统目录 (称主目录), 第二级是 ( A     )。
     A、文件目录                   B、系统目录
     C、用户目录                   D、目录文件
35、对一个文件的访问, 常由(   A   )共同限制。
     A、用户访问权限和文件属性  
    B、用户访问权限和用户优先级
     C、优先级和文件属性          D、文件属性和口令

37、下述对物理记录和逻辑记录关系的描述, (  B   )是正确的。
     A、一个物理块只能存放一个逻辑记录。
     B、一个物理块可以存放一个或多个逻辑记录。
     C、一个逻辑记录不能分开存放于多个物理块中。
     D、多个逻辑记录必须存放在一个物理块中。

39、下列关于索引表的叙述(    B   )是正确的。
     A、索引表中每个记录的索引项可以有多个。
     B、对索引文件存取时, 必须先查找索引表。
     C、索引表中含有索引文件的数据及其物理地址。
     D、建立索引表的目的之一是为了减少存储空间。
     
文件系统中，文件访问控制信息存储的合理位置是（   A  ）
A、文件控制块	B、文件分配表
C、用户口令表	D、系统注册表


设文件F1的当前引用计数值为1，先建立文件F1的符号链接（软连接）文件F2，再建立文件F1的硬链接文件F3，然后删除文件F1。此时，文件F2和文件F3的引用计数值分别是（   B  ）
A、0、1			B、1、1
C、1、2			D、2、1
建立符号链接时，引用计数值直接复制；建立硬件链时，引用计数值加1 。删除文件时，删除操作对于符号链接是不可见的，这并不影响文件系统，当以后再通过符号链接访问时，发现文件不存在，直接删除符号链接；但对于硬链接则不可以直接删除，引用计数值减1，若值不为0，则不能删除此文件，因为还有其他硬链接指向此文件。
当建立F2时，F1和F2的引用计数值都为1 。当再建立F3时，F1和F3的引用计数值就都变成了2.当后来删除F1时，F3的引用计数值为2-1=1，F2的引用计数值不变。


设置当前工作目录的主要目的是（   C  ）
A、节省外存空间		
B、节省内存空间
C、加快文件的检索速度	
D、加快文件的读/写速度

有一个用户进程通过read系统调用读取一个磁盘文件中的数据，则下列关于此过程的叙述中，正确的是（   A  ）
Ⅰ. 若该文件的数据不在内存，则该进程进入睡眠等待状态
Ⅱ. 请求read系统调用会导致CPU从用户态切换到核心态
Ⅲ. read系统调用的参数应包含文件的名称
A、仅Ⅰ、Ⅱ		B、仅Ⅰ、Ⅲ
C、仅Ⅱ、Ⅲ		D、Ⅰ、Ⅱ和Ⅲ
read要求用户提供三个输入参数：①文件描述符fd；②buf缓冲区首址；③传送的字节数n。read的功能是试图从fd所指示的文件中读入n个字节的数据，并将它们送至由指针buf所指示的缓冲区中。


在一个文件被用户进程首次打开的过程中，操作系统需做的是（  B   ）
A、将文件内容读到内存中
B、将文件控制块读到内存中
C、修改文件控制块中的读写权限
D、将文件的数据缓冲区首指针返回给用户进程
一个文件备用户进程首次打开即被执行了Open操作，会把文件的FCB调入内存，而不会把文件内容读到内存中，只有进程希望获取文件内容时才会读入文件内容。


若文件f1的硬链接为f2，两个进程分别打开f1和f2 ，获得对应的文件描述符为fd1和fd2，则下列叙述中，正确的是（  B   
Ⅰ.  f1和f2的读写指针位置保持相同
Ⅱ. f1和f2共享同一个内存索引节点
Ⅲ. fd1和fd2分别指向各自的用户打开文件表中的一项 
	A、仅Ⅲ			B、仅Ⅱ、Ⅲ
	C、仅Ⅰ、Ⅱ			D、Ⅰ、Ⅱ和Ⅲ
硬链接指通过索引节点进行连接。一个文件的物理存储器上有一个索引节点号。存在多个文件名指向同一个索引节点，Ⅱ正确。两个进程各自维护自己的文件描述符，Ⅲ正确，Ⅰ错误。


某文件系统中，针对每个文件，用户类别分为4类：安全管理员、文件主、文件主的伙伴、其他用户；访问权限分为5种：完全控制、执行、修改、读取、写入。若文件控制块中用二进制位串表示文件权限，为表示不同类别用户对一个文件的访问权限，则描述文件权限的位数至少应为（   D  ）
A、5	B、9		C、12	D、20
可以把用户访问权限抽象为一个矩阵，行代表用户，列代表访问权限。这个矩阵有4行5列，1代表true，0代表false，所以需要20位。

```

# 第八章

* ### 文件系统必须完成哪些工作？

  ①文件的存取：包括顺序存取和随机存取

  ②目录管理

  ③文件组织：物理文件和逻辑文件的转换

  ④文件存储空间管理

  ⑤文件操作：创建、打开、读、写、关闭

  ⑥文件的共享和保护

* ### 文件有哪几种逻辑结构，哪几种物理结构？

  ①逻辑结构是从用户观点看到的文件组织形式，用户可以直接处理的数据及其结构。分为无结构的流式文件和有结构的记录式文件。

  ②物理结构是文件在存储设备上的存储组织形式。有连续式文件、链式文件和索引文件

* ### 文件顺序存取与随机存取的主要区别是什么？

  ①顺序存取是严格按照文件中的物理记录排列顺序依次存取

  ②随机存取则允许随意存取文件中的任何一个物理记录，而不管上次存取了哪一个记录

  ③对于变长记录式文件，随机存取实际是退化为顺序存取


```txt
3、在文件管理中,位示图主要是用于(	B)
A.磁盘的驱动调动		B.磁盘空间的分配和回收
C.文件目录的查找		D.页面置换
4、用(  B	)可以防止共享文件可能造成的破坏,但实现起来系统开销太大。
A.用户对树型目录结构中目录和文件的许可权规定
B.存取控制表
C.定义不同用户对文件的使用权
D.隐蔽文件目录

5、文件系统采用两级索引分配方式。如果每个磁盘块的大小为1KB，每个盘块号占4B，则该系统中，单个文件的最大长度是(	A  )。
A.64MB	B.128MB	C.32MB	D.以上答案都不对
每个磁盘块中最多可以有1KB/4B=256个索引项，则两级索引分配方式下单个文件的最大长度=256*256*1KB=64MB

6、一个文件系统中，其FCB占64B，一个盘块大小为1KB，采用一级目录。假定文件目录中有3200个目录项。则查找一个文件平均需要( C  )次访问磁盘。
A.50	B.54		C.100		D.200
3200个目录项占用的盘块数=3200*64B/1KB=200个。因为一级目录平均访盘次数为1/2盘块数（顺序查找目录表中的所有目录项，每个目录项为一个FCB），所以平均的访问磁盘的次数为：200/2=100次。

7、若用8个字（字长32位）组成的位示图管理内存，假定用户归还一个块号为100的内存块时，它对应位示图的位置为(B	)。
A.字号为3，位号为5		B.字号为4，位号为4 
C.字号为3，位号为4 		D.字号为4，位号为5
块号为100的内存块回收时，其对应的位示图行号row和列号col分别为：
	row=（100-1）DIV32+1=4
	col=（100-1）MOD32+1=4
即字号为4，位号也为4.

8、设有一个记录文件，采用链接分配方式，逻辑记录的固定长度为100B，在磁盘上存储时采用记录成组分解技术。盘块长度为512B。如果该文件的目录项已经读入内存，则对第22个逻辑记录完成修改后，共启动了磁盘(	D  )次。
A.3      B.4		C.5		D.6
第22个逻辑记录对应4（22*100/512=4，余152）个物理块，即读入第5个物理块，由于文件采用的物理结构是链接文件，因此需要从目录项所指的第一个物理块开始读取，依次读到第4块才得到第5块的物理地址，共启动磁盘5次。修改还需要写回操作，由于写回时已获得了该块的物理地址，只需1次访问磁盘，故总共需要启动磁盘6次。


下列文件物理结构中，适合随机访问且易于文件扩展的是（B ）
A.连续结构		
B.索引结构
C.链式结构且磁盘块定长	
D.链式结构且磁盘块变长
文件的物理结构包括连续、链式、索引三种，其中链式结构不能实现随机访问，连续结构的文件不易于扩展。因此随机访问且易于扩展是索引结构的特性。



设文件索引结点中有7个地址项，其中4个地址项是直接地址索引，2个地址项是一级间接地址索引，1个地址项是二级间接地址索引，每个地址项大小为4字节，若磁盘索引块和磁盘数据块大小为256B，则可表示的单个文件的最大长度是（  C  ）
A.33KB			B.519KB		
C.1057KB		D.16516KB
4*256+2*(256/4)*256+(256/4)*(256/4)*256=1082368B=1057KB。


为支持CD-ROM中视频文件的快速随机播放，播放性能最好的文件数据块组织的方式是（   A ）
A.连续结构			B.链式结构
C.直接索引结构			D.多级索引结构
为了实现快速随机播放，要保证最短的查询时间，既不能选取链表和索引结构，因此连续结构最优。


若某个文件系统索引结点（inode）中有直接地址项和间接地址项，则下列选项中，与单个文件长度无关的因素是（A ）
A.索引结点的总数	
B.间接地址索引的级数
C.地址项的个数	
D.文件块大小


在文件的索引结点中存放直接索引指针10个，一级和二级索引指针各1个。磁盘块大小为1KB，每个索引指针占4个字节。若某文件的索引结点已在内存中，则把该文件偏移量（按字节编址）为1234和307400处所在的磁盘块读入内存，需访问的磁盘块个数分别是（  B  ）
A.1,2	B.1,3		C.2,3		D.2,4


文件系统用位图法表示磁盘空间的分配情况，位图存于磁盘的32~127号块中，每个盘块占1024个字节，盘块和块内字节均从0开始编号。假设要释放的盘块号为409612，则位图中要修改的位所在的盘 块号和块内字节序号分别是（  C ）。
A.81、1		B.81、2	C.82、1	D.82、2

```

![](https://ws1.sinaimg.cn/large/0067fcixly1fyma4hd6ngj30u70l3jxd.jpg)
①用户E欲共享文件Q需要有访问Q的权限。在权限许可的情况下，可通过相应的路径来访问文件Q。若用户E当前的目录为E，则访问路径为
​	../../D/G/K/O/Q
②可在目录G下建立两个链接文件，分别链接到文件S及T上，这样用户G就可以直接访问这两个文件了
③用户E可以通过修改文件I的存取控制表来对文件I加以保护，不让别的用户使用。具体实现方法是，在文件I的存取控制表中，只留下用户E的访问权限，其他用户对该文件无操作权限，从而达到不让其他用户访问的目的。

![](https://ws1.sinaimg.cn/large/0067fcixly1fyma9vqc1pj30sm0g1jvb.jpg)

2^10 = 1024

核心： 一个物理块对应一个FAT  ， 物理块的数量=磁盘大小/物理块大小   然后因为要用编号来为每个物理块编号，所以要一个二进制数能表示最大物理块的数量     所以每个FAT的大小就是这个二进制所占的位数

（1） 540M / 1K = 540k 	 2^19 < 540k < 2^20   所以需要20位来存   20/8 = 2.5B   2.5B * 540K = 1350KB

（2） 若是以4bit向上扩充的话就是	1.2G/1k=1.2M个盘块，需要21位二进制数表示，即每个FAT表项占3字节
​	3B*1.2M=3.6MB



![](https://ws1.sinaimg.cn/large/0067fcixly1fymb28w7a6j30tb0ej76z.jpg)答：(1)顺序检索位示图，
​    从中找到第一个值为0的二进制位，行号i1=3，列号j1=3；
​                    第二个值为0的二进制位，行号i2=4，列号j2=7。
​        (2)空闲盘号为：b1 = n(i1 - 1) + j1 = 16 × 2 + 3 = 35； 
​                                     b2 = n(i2 - 1) + j2 = 16 × 3 + 7 = 55。
​        (3)修改位示图，令map[i1, j1] = map[3, 3] = 1;
​	        	                 map[i2, j2] = map[4, 7] = 1。



```tex
三、应用题
★★★★★★★★★★★★★★★重点
2.有一磁盘组共有10个盘面，每个盘面上有100磁道，每个磁道有16个扇区，假设分配以扇区为单位，若使用位示图管理磁盘空间，问位示图需要占用多少空间？若空白文件目录的每个表目占用5B，问什么时候空白文件目录大于位示图。
解：扇区数：16×100×10 = 16000
        用位示图表示扇区数状态需要的位数为16000位 = 2000B
        因为空白文件目录的每个表目占用5B，所示位示图需要占用2000B，
        2000B可存放表目2000÷5 = 400
       ∴当空白区数目大于400时，空白文件目录大于位示图。
       

三、应用题
3.设某系统的磁盘有500块，块号为0,1,2,…,499。
(1)若用位示图法管理这500块的磁盘空间，当字长32位时，需要多少个字的位示图？
(2)第i字的第j位对应的块号是多少？ 
答：(1) 500÷32 = 15.625 ≈ 16
        (2) 块号：N = 32×(i - 1) + j。


三、应用题
4.一个磁盘组共有100个柱面，每个柱面8个盘面，每个盘面被分为4个扇区，若盘块大小与扇区大小相等，扇区编号从 ”0”开始，现用字长为16位的200个字(第0~199字)组成位示图来指示磁盘空间的使用情况，则，文件系统发现位示图中第15字第7位为0，分配出去时，盘块号为：_____247_______。
15×16 + 7 = 247
注意这题是从0开始的


三、应用题
5.现在系统采用成组链接法，某一进程要释放三个物理块，其块号为150,152,160，如图1所示，试给出其释放过程和释放后管理块的状况。其后，又有一个进程要求分配4个存储块，试给出分配过程和分配后的管理块状况。
	free：98
	[0]	120
	[1]	121
		…
	[96] 145
	[97] 210
		…
		
解：释放二物理块150,152后如下图2，之后满了。
free：100
[0]	120
[1]	121
	…
[96] 145
[97] 210
[98] 150
[99] 152
	…
释放160物理块后，把信息装入160块中，如图3。
free：1
[0]	160

之后，进程要求分配4个分配块，分配给160 ， 之后再分配三块，152,150,210




```

三、应用题
6.设一个文件由100个物理块构成。对于连续、链接和索引存储方式，分别计算执行下列操作时所应启动I/O次数(链接方式使用的是单向指针，但没有头、尾节点，注意：“中间块”是指第51块)
(1)将一块加在文件的开头	 (4)从文件的开头去掉一块
(2)将一块加在文件的中间	 (5)从文件的中间去掉一块
(3)将一块加在文件的末尾	 (6)从文件的末尾去掉一块	

![](https://ws1.sinaimg.cn/large/0067fcixly1fymbv9dxj3j30qr0jkq4p.jpg)

```txt
★★★★★★★★★★★★重点
1、在FAT16文件系统中，且每个盘块的大小是512字节，
1)如果每个簇可以有4个盘块，可以管理的最大分区空间是多少？
2)如果每个簇可以有64个盘块，可以管理的最大分区空间又是多少？
答： 1）216 * 4 * 512 = 128M
2）216 * 64 * 512 = 2G


2、某操作系统的磁盘文件空间共有500块，若用字长为32位的位示图管理盘块空间，试问：
1)位示图需要多少个字？
2)如果b（盘块号）, i， j从1开始计数，第i字第j位对应的块号是多少？
3)如果b（盘块号）, i， j 从0开始计数，第i字第j位对应的块号是多少？
答：
1）[500/32]  =16 
2) b = 32* (i-1) +j 
3）b= 32*i+j

1、存放在某个磁盘上的文件系统，采用混合索引分配方式，其FCB中共有13个地址项，第0~9 个地址项为直接地址，第10个地址项为一次间接地址，第11个地址项为二次间接地址，第12个地址项为三次间接地址。如果每个盘块的大小为4KB,若盘块号需要用4个字节来描述，请问系统中允许文件的最大长度是多少？
直接地址： 10 * 4KB  + 
一次间接地址：  （4KB/4B）* 4KB  + 
二次间接地址：  （4KB/4B）* （4KB/4B） * 4KB  + 
三次间接地址：  （4KB/4B）* （4KB/4B） * （4KB/4B） * 4KB  
 = 40KB+4MB+4GB+4TB 
 
 2、设有一分页存储管理系统，向用户提供的逻辑地址空间最大为16页，每页4096字节，
①试问逻辑地址至少应为多少位？
		 
每页4096B，所以页内位移部分地址需要占12个二进制位，
逻辑地址空间最大为16页，所以页号部分地址需要占4个二进制位。故逻辑地址至少应为16位。

3、在两级索引分配方式下，如果每个盘块的大小为4KB，每个盘块号占4个字节，
①所允许的文件最大长度是多少？

(4KB/4B) * (4KB/4B) * 4KB =  4GB


4、请分别解释在连续分配方式、隐式链接分配方式、显式链接分配方式和索引分配方式中如何将文件的字节偏移量3500转换为物理块号和块内位移量（设盘块大小为1KB，盘块号需占4个字节）。 
解：首先，将字节偏移量3500转换成逻辑块号和块内位移量：3500／1024得到商为3，余数为428，即逻辑块号为3，块内位移量为428。
（1） 在连续分配方式中，可从相应文件的FCB中得到分配给该文件的起始物理盘块号，例如a0，故字节偏移量3500相应的物理盘块号为a0+3，块内位移量为428。
（2） 在隐式链接方式中，由于每个盘块中需留出4个字节（如最后的4个字节）来存放分配给文件的下一个盘块的块号，因此字节偏移量3500的逻辑块号为3500／1020的商3，而块内位移量为余数440。
（3） 在显式链接方式中，可从文件的FCB中得到分配给文件的首个盘块的块号，如c0；然后可在FAT的第c0项中得到分配给文件的第1个盘块的块号，如c1；再在FAT的第c1项中得到文件的第2个盘块的块号，如c2；在FAT的第c2项中得到文件的第3个盘块的块号，如c3。如此，便可获得字节偏移量3500对应的物理块号c3，而块内位移量则为428。
（4） 在索引分配方式中，可从文件的FCB中得到索引表的地址。从索引表的第3项（距离索引表首字节12字节的位置）可获得字节偏移量3500对应的物理块号d，而块内位移量为428。 


6、在某个文件系统中，每个盘块为512字节，文件控制块占64个字节，其中文件名占8个字节。如果索引节点编号占2个字节，对一个存放在磁盘上的256个目录项的目录，试比较引入索引节点前后，为找到其中一个文件的FCB，平均启动磁盘的次数。 

解：在引入索引节点前，每个目录项中存放的是对应文件的FCB，故256个目录项的目录总共需要占用256×64／512=32个盘块。故，在该目录中检索到一个文件平均启动磁盘次数为（1+32）／2=16.5。

在引入索引节点后，每个目录项中只需存放文件名和索引节点的编号，因此256个目录项的目录总共需要占用256×（8+2）／512=5个盘块。因此，找到匹配的目录项平均需要启动3次磁盘；而得到索引节点编号后还需启动磁盘将对应文件的索引节点读入内存，故平均需要启动磁盘4次。可见，引入索引节点后，可大大减少启动磁盘的次数，从而有效地提高检索文件的速度。
```

![](https://ws1.sinaimg.cn/large/0067fcixly1fymhu83ho9j30of0kk76g.jpg)

![](https://ws1.sinaimg.cn/large/0067fcixly1fymhwtwqhnj30oe0gdta8.jpg)

..银行家算法还有个文档没看哦