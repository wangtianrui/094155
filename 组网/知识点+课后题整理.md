# 第一章

* ### 什么是计算机网络？计算机网络有什么功能？

  概念：将分散在不同地点的多台计算机、终端和外部设备 用通信线路互联起来，彼此间能够互相通信，并且实现资源共享的整个系统就叫做计算机网络。

  功能：计算机网络的功能很多。其中最主要的是实现计算机与终端、计算机与计算机的数据通信和资源共享

* ### 简述计算机网络发展的过程？

  这题考了我吃屎

* ### 计算机网络是如何分类的？

  1、以网络的交换功能进行分类

  ​	电路交换网络、报文交换网络、分组交换网络等

  2、按拓扑结构来分

  ​	集中式网络、分布式网络

  3、按照作用范围来分

  ​	广域网、局域网、城域网

  4、构造使用的介质来分

  ​	有线网络、无线网络

* ### 常见的网络拓扑结构有哪些？其特点是什么？

  ①星形拓扑：

  ​	优点：结构简单、便于管理（集中式）

  ​	缺点：每台入网主机均需与中央处理设备互联，线路利用率低，中央处理设备需处理所有的服务，负载较重，在	

  ​	中心处容易出现单点故障，导致网络瘫痪

  ②总线型拓扑：

  ​	优点：多台机器公用一条传输信道，信道利用率高，不会因为某个节点故障而影响网络整体工作

  ​	缺点：同一时刻只能由两台计算机通信，网络的延伸距离有限，结点数有限

  ③环型拓扑：

  ​	优点：传输控制机制比较简单

  ​	缺点：结点数有限，一旦某结点故障，将导致网络瘫痪

  ④网状形拓扑：

  ​	优点：可靠性高

  ​	缺点：线路浪费

* ### 简述OSI参考模型各层的功能？   # 注意后三层，。以前没背过！重点

  ①物理层：

  ​	为设备之间的数据通信提供**传输媒体以及互连设备**，为数据传输提供可靠的环境。

  ​	定义了网络之间的物理链路的**电气或机械特性**

  ②数据链路层

  ​	为上层提供无差错的数据传输，对数据进行**检错、成帧、帧同步、流量控制**

  ③网络层

  ​	进行数据包的**寻址、路由选择和中继**，激活以及终止网络连接，采取分时**复用**技术在一条数据链路上复用多条网	

  ​	络连接，**查错检测与恢复，流量控制**

  ④传输层

  ​	提供对上层透明的可靠的数据传输，主要：**流控、多路技术、虚电路管理和纠错及恢复**

  ⑤会话层

  ​	为会话实体间建立连接、数据传输和连接释放。使应用程序建立和维持会话，并能使会话获得同步，使用校验点

  ​	可使通信会话在通信失效时从校验点继续恢复通信

  ⑥表示层

  ​	对上层数据或信息进行变换，以保证一个主机应用层信息可以被另一个主机的应用程序理解，表示层的数据转换

  ​	包括数据的加密、压缩、格式转换等

  ⑦应用层

  ​	为操作系统或网络应用程序提供访问网络服务的接口

* ### 什么是协议？举例说明？

  概念：计算机网络中通信时双方需要共同遵守的规则和约定。由它**解释、协调和管理**算机之间的通信和相互间的操作

  举例：IP协议，通过对IP报文格式的定义，以及各个字段含义及其处理方法的定义，规定了通信双方在网络的操作规则，而工作于网络层的设备路由器，则依据IP协议中规定的地址进行寻址和路由转发

* ### 举例说明TCP头部中6个标志位的作用？

  ①URG（紧急标志位）

  ​	说明紧急指针有效

  ②ACK（确认标志位）

  ​	大多数情况下该位是置位的，说明确认序列号有效。 # 置位

  ③PSH（推标志位）

  ​	该标志置位时，接收端在收到数据后应立即请求	

```txt
1）关于“互联网”的概念，以下说法正确的是？
A、是局域网  B、是广域网  C、是一组相互联接起来的网络  D、就是互联网 

（2）以下哪种拓朴结构提供了最高的可靠性保证 
A、星型拓扑   B、环形拓朴  C、总线型拓朴  D、网状拓朴 
# 这道题注意是最高的 可靠性 

（3）当比特流达到目的主机后，会进行什么处理过程？
A、封装  B、解封装  C、分段  D、编码 

（4）LAN的特点主要有以下那几项？
A、运行在有限的地理范围内  B、至少包含一台服务器  C、允许多个用户接入高带宽介质 D、将旅行中的雇员接入公司的网络 
# 易错

（5）以下关于ISO参考模型的描述中正确的是哪些？
A、一组用于建立可靠的、高效的网络的标准协议 B、定义了每一层的功能  C、会话层定义了关于数据加密的标准 D、在世界上得到了广泛的应用  
# TCP/IP才是用的最多的
# 易错

（6）OSI的哪一层处理物理寻址和网络拓朴结构？
A、物理层  B、数据链路层  C、网络层  D、传输层
# 易错。 不是物理层哦

（7）TCP/IP的哪一层保证了传输的可靠性、流量控制和检错与纠错？
A、网络接口层  B、互联网络层  C、传输层  D、应用层 
# 易错  注意可靠二字！！不是网络层

（8）中继器的作用是什么？ 
A、解决两个节点之间距离太远的问题 B、解决网络带宽不足的问题  C、解决高速设备与低速设备的匹配问题 D、解决网络上设备的兼容性问题  
# 物理层——中继器、集线器（信号放大）		数据链路层——交换机、网桥	网络层——路由器

（9）IP包头中与分段和重组有关的字段是哪些
A、TOS  B、标识符  C、标志  D分段偏移 
# P25

（10）二进制数11011001的十进制表示是多？ 
A、186  B、202  C、217  D、222


1  2  3  4   5   6  7  8   9   10
C  D  B  AC  AB  B  C  A  BCD  C
```

# 第二章

* ### 简述CSMA/CD的工作原理

  带有冲突检测的载波侦听多路访问（CSMA/CD）是指计算机在传输数据之前先监听电缆上的信号，看是否有其他的计算机也在传输。如果有的话则等待，直到该电缆上当前的传输工作完成。每台计算机在它自己的传输过程中也进行监听，如果检测到有冲突，则阻塞电缆以警告所有的发送者，然后退回来等待一段随机事件之后再开始尝试。

* ### 如何区分EthernetⅡ格式和802.3格式的以太网帧？

  这两种标准的帧是用“类型/长度”字段的值来区分的（即源地址后的2字节的内容），该字段的值大于或等于0x0600时，表示上层数据使用的类型。如：0x0806——ARP请求或应答、0x0800表示IP协议、0x0600表示以太网用户数据的长度。

* ### 简述什么是冲突域，为什么需要分割冲突域？

  概念：冲突域是冲突在其中发生并传播的区域。共享介质上竞争同一带宽的所有节点属于同一个冲突域，冲突会在共享介质上发生。随着以太网中接入的结点越来越多，流量也急速上升，冲突也会越来越多，以至于主机无法正常地发送帧。

  为什么：使用交换式以太网划分冲突域后，每个冲突域只有一个结点，冲突就不可能发生，因而提高了性能

* ### 交换机如何构造MAC地址表？

  当交换机接收到一个帧后，会将帧的源MAC地址和接收端口写入MAC地址表中，成为MAC地址表中的一条记录。这个过程不断进行，随着网络内的主机都发送过帧后，就可以构造出完整的MAC地址表了。这个过程称为交换机的“学习”过程。

* ### 交换机如何转发单播数据帧？

  交换机收到单播数据帧后会查找MAC地址表，如果目标MAC地址已知，会将其从相应的端口转发出去，而不会从其他端口也转发出去。如果目标MAC地址未知，则会从除了接收端口之外的所有端口转发出去（泛洪）

* ### 交换机的三种帧转发方式各自有什么特点？

  直通转发、存储转发、无碎片直通转发

  ①直通转发（快速转发）：交换机收到帧头（通常只检查14个字节）后立刻察看目的MAC地址并进行转发。

  **优点**：这可以极大地降低从入站端口到出站端口的延迟，交换速度较快，快速转发时的延迟是固定的，与帧长无关。**缺点**：冲突产生的碎片和出错的帧也将会被转发

  ②存储转发：交换机要收到完整的帧之后，读取目标和源MAC地址，执行循环冗余校验，和帧尾部的4字节校验码进行对比，如果结果不正确就进行丢弃。

  **优点**：保证了被转发的帧都是正确有效的。

  **缺点**：但增加了转发延迟，帧穿越交换机的延迟将随着帧长而不同

  ③无碎片直通转发（分段过滤）：介于两者之间，交换机读取前64个字节后开始转发。

  **优点**：冲突常发生在前64字节，通过读取前64字节，交换机就能过滤掉由冲突产生的帧碎片。

  **缺点**：校验不正确的帧依然会被转发

* ### 要初始化配置一台新出厂的锐捷交换机，通常应该执行哪些步骤？

  ①使用Console线缆将主机的串口和交换机的控制口连接起来

  ②配置主机的超级终端，建立连接

  ③给交换机加电启动，可以选择对话方式或者手工方式进行配置

  ④配置内容一般包括：主机名、特权模式密码、管理IP地址、Telnet服务等

  ⑤查看配置是否正确，确认无误后保存退出

# 第三章

## VLAN

## IEEE802.1q

* 定义了基于接口的VLAN模型

* 主要在于标签

  每一个支持802.1q协议的主机，在发送数据包时，都在**原来的以太网帧头中的源地址后增加了一个4字节的802.1q帧头**。后面接上原本以太网的长度或类型域。

  4字节的帧头包含了：2字节的标签协议标识TPID和2字节的标签控制信息TCI

  其中TPID：是固定值0x8100，说明该帧有802.1q标签

  TCI：包括用户优先级

* 如果所连主机都能识别这个玩意，那么就叫Tag Aware接口；只要有一台不支持就叫UnTagged（就不能用这个协议）

## 交换机

交换机上的二层接口叫Switch Port，这个接口可以配置成一个Access接口（UnTagged）或者是Trunk接口（Tag Aware）

* Trunk

  允许多个VLAN通过，发出的帧带有VLAN标签，一般用于交换机之间的连接

  由于属于多个VLAN，所以一般要设置VLAN ID，默认状况下是VLAN 1 ， 会转发所有VLAN的帧

  当接收到不带VLAN标签的报文时，将其转发到属于默认VLAN的接口，当接收到带有VLAN TAG的报文时，若与核对端口ID号相同则将去掉VLAN ID后发送该报文

  两种帧的操作：

  ①UNTagged：传给默认VLAN

  ②ID为默认ID：去掉标签再发送给默认端口

  ③ID为允许VLANID时：保持原样发送

  ④都不满足：丢弃

* Access

  只能属于一个VLAN，一般用于连接计算机接口

  能接收以下三种帧：

  ①Un Tagged：为无标签帧添加默认VLAN标签，然后准备发出去，发送帧前先去掉帧上附带的VLAN标签，在发送

  ② VLANID为Access接口所属的 ：接收，并在发送前去掉VLAN标签后再发送

  ③VLAN ID为0的Tagged帧：接收该帧，ID为0是用于识别帧的优先级

## VLAN间通信

* 单臂路由

  路由可以从某一个VLAN接收数据包，然后将这个数据包传递给另一个VLAN，需要在路由上的一个物理接口上启用子接口  P89

* 三层交换机

  带路由功能的交换机，在三层交换机上创建各个VLAN的虚拟接口（Switch virtual interface -- SVI） 并设置IP地址

![](https://ws1.sinaimg.cn/large/0067fcixly1fynmvnx44tj30ik0c4q6f.jpg)

* ### 简述VLAN的概念，为什么需要使用VLAN？

  VLAN：虚拟局域网，是指位于一个或多个局域网的设备经过配置能够像连接到同一个信道一样进行通信，而实际上他们分布在不同的局域网段里。

  用处：

  通过在局域网内使用VLAN

  ①可以很好地控制不必要的广播报文的扩散。提高了网络内带宽资源的利用率，也减少了主机接收这些不必要的广播所带来的资源浪费

  ②可以强化网络安全。只要人员在同一个基于二层的网络内，数据、资源就有可能不安全，利用VLAN技术限制不同工作组间的用户二层之间互访，这个问题就可以得到很好的解决。

  ③可以强化网络管理功能。可以根据用户的组织结构进行划分，可以突破共享网络中的地理位置限制。

* ### VLAN有哪些定义方法？

  ①基于端口的定义：根据以太网交换机的端口来划分，实际上就是交换机上某些端口的集合

  ②基于MAC地址的VLAN：根据每个主机网卡的MAC地址来分，即每个MAC地址都被固定地配置属于哪个VLAN

  ③基于网络层的VLAN：根据每个主机的网络层地址或协议类型划分

  ④基于IP组播的VLAN：依据组播划分，即认为一个组播组就是一个VLAN

* ### 802.1Q的标签中，各个字段的用途是什么？

  ①TPID：标签协议标识字段，值固定为0x8100，说明该帧具有802.1q标签

  ②TCI：标签控制信息字段，包括用户的优先级（priority）、规范格式指示器（CFI）和VLAN ID

  ​	priority：优先级，用于表示当交换机发生拥塞时，优先转发哪个数据包

  ​	CFI：这一位主要用于总线型的以太网与FDDI、令牌环网交换数据时的帧格式。在以太网交换机中这个常置0

  ​	VLAN ID：12位的域，指明VLAN的ID。理论上支持4096（2^12）个VLAN，但是VLAN ID=0 用于识别帧优先

  ​	级，4095作为预留值，所以VLAN配置的**最大可能值为4094**

* ### Access端口是如何收发帧的？

  Access端口发出的数据帧是不带IEEE 802.1q标签的，且它只能**接受**以下三种格式的帧：

  ①UnTagged：

  ​	接收不带IEEE 802.1q标签的帧，并为无标签帧添加缺省VLAN的标签，然后发送出去。

  ​	发送前。则去掉帧上附带的VLAN标签，再发送

  ②Tagged帧（分三种，0，与当前相应的，都不是的）：

  ​	0：接收，在标签中，VLAN ID=0 是用于标识帧优先级的

  ​	与当前相应的：接收，并在发送时去掉VLAN标签后再发送

  ​	都不是（不同，也不为0）：丢弃

  ​	

* ### 在一台锐捷交换机上配置VLAN5（名称为abc），将端口F0/10-f0/20添加到VLAN5，并将F0/1端口设置成Trunk端口，应该如何配置？

```txt
Switch(config)#vlan 5  
Switch(config-vlan)#name abc 
Switch(config-vlan)#exit  
Switch(config)#interface range fastEthernet 0/10-20 
Switch(config-if-range)#switchport mode access 
Switch(config-if-range)#switchport access vlan 5 
Switch(config-if-range)#exit  
Switch(config)#interface fastEthernet 0/1 
Switch(config-if)#switchport mode trunk 
Switch(config-if)#end 
Switch# 
```

* ### 为什么需要三层设备才能实现VLAN间的通信？

  VLAN间的通信等同于**不同广播域**之间的通信，必须使用第三层设备才能实现。

  VLAN之间的通信就是指**VLAN间的路由**，是VLAN之间在一个路由器或者其他三层设备上发生路由。

* ### 目前有哪些方法可以实现VLAN间的通信？

  两种：单臂路由的方式实现  或  三层交换机以三层交换的方式实现

  单臂路由：在一个路由器的物理接口上启用子接口，也就是将以太网物理接口划分为多个逻辑的、可编址的接口，并配置成干道模式，每个VLAN对应一个这样的接口，这样路由器就能够知道如何到达这些互联的VLAN，得以实现

  三层交换：在三层交换机内为每个VLAN启用SVI交换虚拟接口，在这些接口上配置网络层地址，成为每个VLAN的网关，即可实现

# 第四章

为解决单点故障问题，引入了冗余。但是会出现**广播风暴和多帧复制以及MAC地址表抖动**

广播风暴：在没有避免交换换路措施的情况下，每个交换机都无穷无尽地转发广播帧

多帧复制：单播的数据帧可能被多次复制传送到目的站点

MAC地址表抖动：MAC地址表不稳定，这是由于相同帧的拷贝在交换机的不同端口上被接收引起的。

## 生成树协议（IEEE 802.d）

主要思想：当网络中存在备份链路时，只允许主链路激活。如果主链路因故障而被断开后，备用链路才会被打开。当交换机存在多条链路时，交换机的生成树算法只启动最主要的一条链路，而其他链路都会被阻塞，并变为备用链路。

* 根交换机

* 根端口

* 指定端口

* 路径开销

* 生成树算法（SPA）

  * 桥接协议数据单元（BPDU）

    所有的功能都是通过交换机或者网桥之间周期性地发送BPDU实现的，每2秒发送一次报文。他是一个二层报文，目的MAC地址是**多播地址**01-80-C2-00-00-00，所有支持STP的交换机都会接收和处理该报文

    当交换机的一个端口收到高优先级的BPDU（更小的root BID或者更小的 Root path cost），就**保存**该信息，并向所有端口**更新并传播**信息，否则丢弃信息

    基于以上操作，就能得到以下结果：

    ①网络中选择了一个交换机为根网桥

    ②每个交换机都计算到根网桥的最短路径

    ③除根网桥外的每个交换机都有一个根端口，即提供最短路径到根网桥的端口

    ④每个LAN都有了指定交换机，位于该LAN与根交换机指尖的最短路径中，指定交换机与LAN相连的端口称为指定端口。

    ⑤根端口和指定端口进入转发（Forwarding）状态

    ⑥其他的冗余端口就处于阻塞状态（Blocking）

