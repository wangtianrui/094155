# 第一章

* ### 什么是计算机网络？计算机网络有什么功能？

  概念：将分散在不同地点的多台计算机、终端和外部设备 用通信线路互联起来，彼此间能够互相通信，并且实现资源共享的整个系统就叫做计算机网络。

  功能：计算机网络的功能很多。其中最主要的是实现计算机与终端、计算机与计算机的数据通信和资源共享

* ### 简述计算机网络发展的过程？

  这题考了我吃屎

* ### 计算机网络是如何分类的？

  1、以网络的交换功能进行分类

  ​	电路交换网络、报文交换网络、分组交换网络等

  2、按拓扑结构来分

  ​	集中式网络、分布式网络

  3、按照作用范围来分

  ​	广域网、局域网、城域网

  4、构造使用的介质来分

  ​	有线网络、无线网络

* ### 常见的网络拓扑结构有哪些？其特点是什么？

  ①星形拓扑：

  ​	优点：结构简单、便于管理（集中式）

  ​	缺点：每台入网主机均需与中央处理设备互联，线路利用率低，中央处理设备需处理所有的服务，负载较重，在	

  ​	中心处容易出现单点故障，导致网络瘫痪

  ②总线型拓扑：

  ​	优点：多台机器公用一条传输信道，信道利用率高，不会因为某个节点故障而影响网络整体工作

  ​	缺点：同一时刻只能由两台计算机通信，网络的延伸距离有限，结点数有限

  ③环型拓扑：

  ​	优点：传输控制机制比较简单

  ​	缺点：结点数有限，一旦某结点故障，将导致网络瘫痪

  ④网状形拓扑：

  ​	优点：可靠性高

  ​	缺点：线路浪费

* ### 简述OSI参考模型各层的功能？   # 注意后三层，。以前没背过！重点

  ①物理层：

  ​	为设备之间的数据通信提供**传输媒体以及互连设备**，为数据传输提供可靠的环境。

  ​	定义了网络之间的物理链路的**电气或机械特性**

  ②数据链路层

  ​	为上层提供无差错的数据传输，对数据进行**检错、成帧、帧同步、流量控制**

  ③网络层

  ​	进行数据包的**寻址、路由选择和中继**，激活以及终止网络连接，采取分时**复用**技术在一条数据链路上复用多条网	

  ​	络连接，**查错检测与恢复，流量控制**

  ④传输层

  ​	提供对上层透明的可靠的数据传输，主要：**流控、多路技术、虚电路管理和纠错及恢复**

  ⑤会话层

  ​	为会话实体间建立连接、数据传输和连接释放。使应用程序建立和维持会话，并能使会话获得同步，使用校验点

  ​	可使通信会话在通信失效时从校验点继续恢复通信

  ⑥表示层

  ​	对上层数据或信息进行变换，以保证一个主机应用层信息可以被另一个主机的应用程序理解，表示层的数据转换

  ​	包括数据的加密、压缩、格式转换等

  ⑦应用层

  ​	为操作系统或网络应用程序提供访问网络服务的接口

* ### 什么是协议？举例说明？

  概念：计算机网络中通信时双方需要共同遵守的规则和约定。由它**解释、协调和管理**算机之间的通信和相互间的操作

  举例：IP协议，通过对IP报文格式的定义，以及各个字段含义及其处理方法的定义，规定了通信双方在网络的操作规则，而工作于网络层的设备路由器，则依据IP协议中规定的地址进行寻址和路由转发

* ### 举例说明TCP头部中6个标志位的作用？

  ①URG（紧急标志位）

  ​	说明紧急指针有效

  ②ACK（确认标志位）

  ​	大多数情况下该位是置位的，说明确认序列号有效。 # 置位

  ③PSH（推标志位）

  ​	该标志置位时，接收端在收到数据后应立即请求	

```txt
1）关于“互联网”的概念，以下说法正确的是？
A、是局域网  B、是广域网  C、是一组相互联接起来的网络  D、就是互联网 

（2）以下哪种拓朴结构提供了最高的可靠性保证 
A、星型拓扑   B、环形拓朴  C、总线型拓朴  D、网状拓朴 
# 这道题注意是最高的 可靠性 

（3）当比特流达到目的主机后，会进行什么处理过程？
A、封装  B、解封装  C、分段  D、编码 

（4）LAN的特点主要有以下那几项？
A、运行在有限的地理范围内  B、至少包含一台服务器  C、允许多个用户接入高带宽介质 D、将旅行中的雇员接入公司的网络 
# 易错

（5）以下关于ISO参考模型的描述中正确的是哪些？
A、一组用于建立可靠的、高效的网络的标准协议 B、定义了每一层的功能  C、会话层定义了关于数据加密的标准 D、在世界上得到了广泛的应用  
# TCP/IP才是用的最多的
# 易错

（6）OSI的哪一层处理物理寻址和网络拓朴结构？
A、物理层  B、数据链路层  C、网络层  D、传输层
# 易错。 不是物理层哦

（7）TCP/IP的哪一层保证了传输的可靠性、流量控制和检错与纠错？
A、网络接口层  B、互联网络层  C、传输层  D、应用层 
# 易错  注意可靠二字！！不是网络层

（8）中继器的作用是什么？ 
A、解决两个节点之间距离太远的问题 B、解决网络带宽不足的问题  C、解决高速设备与低速设备的匹配问题 D、解决网络上设备的兼容性问题  
# 物理层——中继器、集线器（信号放大）		数据链路层——交换机、网桥	网络层——路由器

（9）IP包头中与分段和重组有关的字段是哪些
A、TOS  B、标识符  C、标志  D分段偏移 
# P25

（10）二进制数11011001的十进制表示是多？ 
A、186  B、202  C、217  D、222


1  2  3  4   5   6  7  8   9   10
C  D  B  AC  AB  B  C  A  BCD  C
```

# 第二章

* ### 简述CSMA/CD的工作原理

  带有冲突检测的载波侦听多路访问（CSMA/CD）是指计算机在传输数据之前先监听电缆上的信号，看是否有其他的计算机也在传输。如果有的话则等待，直到该电缆上当前的传输工作完成。每台计算机在它自己的传输过程中也进行监听，如果检测到有冲突，则阻塞电缆以警告所有的发送者，然后退回来等待一段随机事件之后再开始尝试。

* ### 如何区分EthernetⅡ格式和802.3格式的以太网帧？

  这两种标准的帧是用“类型/长度”字段的值来区分的（即源地址后的2字节的内容），该字段的值大于或等于0x0600时，表示上层数据使用的类型。如：0x0806——ARP请求或应答、0x0800表示IP协议、0x0600表示以太网用户数据的长度。

* ### 简述什么是冲突域，为什么需要分割冲突域？

  概念：冲突域是冲突在其中发生并传播的区域。共享介质上竞争同一带宽的所有节点属于同一个冲突域，冲突会在共享介质上发生。随着以太网中接入的结点越来越多，流量也急速上升，冲突也会越来越多，以至于主机无法正常地发送帧。

  为什么：使用交换式以太网划分冲突域后，每个冲突域只有一个结点，冲突就不可能发生，因而提高了性能

* ### 交换机如何构造MAC地址表？

  当交换机接收到一个帧后，会将帧的源MAC地址和接收端口写入MAC地址表中，成为MAC地址表中的一条记录。这个过程不断进行，随着网络内的主机都发送过帧后，就可以构造出完整的MAC地址表了。这个过程称为交换机的“学习”过程。

* ### 交换机如何转发单播数据帧？

  交换机收到单播数据帧后会查找MAC地址表，如果目标MAC地址已知，会将其从相应的端口转发出去，而不会从其他端口也转发出去。如果目标MAC地址未知，则会从除了接收端口之外的所有端口转发出去（泛洪）

* ### 交换机的三种帧转发方式各自有什么特点？

  直通转发、存储转发、无碎片直通转发

  ①直通转发（快速转发）：交换机收到帧头（通常只检查14个字节）后立刻察看目的MAC地址并进行转发。

  **优点**：这可以极大地降低从入站端口到出站端口的延迟，交换速度较快，快速转发时的延迟是固定的，与帧长无关。**缺点**：冲突产生的碎片和出错的帧也将会被转发

  ②存储转发：交换机要收到完整的帧之后，读取目标和源MAC地址，执行循环冗余校验，和帧尾部的4字节校验码进行对比，如果结果不正确就进行丢弃。

  **优点**：保证了被转发的帧都是正确有效的。

  **缺点**：但增加了转发延迟，帧穿越交换机的延迟将随着帧长而不同

  ③无碎片直通转发（分段过滤）：介于两者之间，交换机读取前64个字节后开始转发。

  **优点**：冲突常发生在前64字节，通过读取前64字节，交换机就能过滤掉由冲突产生的帧碎片。

  **缺点**：校验不正确的帧依然会被转发

* ### 要初始化配置一台新出厂的锐捷交换机，通常应该执行哪些步骤？

  ①使用Console线缆将主机的串口和交换机的控制口连接起来

  ②配置主机的超级终端，建立连接

  ③给交换机加电启动，可以选择对话方式或者手工方式进行配置

  ④配置内容一般包括：主机名、特权模式密码、管理IP地址、Telnet服务等

  ⑤查看配置是否正确，确认无误后保存退出

# 第三章

## VLAN

## IEEE802.1q

* 定义了基于接口的VLAN模型

* 主要在于标签

  每一个支持802.1q协议的主机，在发送数据包时，都在**原来的以太网帧头中的源地址后增加了一个4字节的802.1q帧头**。后面接上原本以太网的长度或类型域。

  4字节的帧头包含了：2字节的标签协议标识TPID和2字节的标签控制信息TCI

  其中TPID：是固定值0x8100，说明该帧有802.1q标签

  TCI：包括用户优先级

* 如果所连主机都能识别这个玩意，那么就叫Tag Aware接口；只要有一台不支持就叫UnTagged（就不能用这个协议）

## 交换机

交换机上的二层接口叫Switch Port，这个接口可以配置成一个Access接口（UnTagged）或者是Trunk接口（Tag Aware）

* Trunk

  允许多个VLAN通过，发出的帧带有VLAN标签，一般用于交换机之间的连接

  由于属于多个VLAN，所以一般要设置VLAN ID，默认状况下是VLAN 1 ， 会转发所有VLAN的帧

  当接收到不带VLAN标签的报文时，将其转发到属于默认VLAN的接口，当接收到带有VLAN TAG的报文时，若与核对端口ID号相同则将去掉VLAN ID后发送该报文

  两种帧的操作：

  ①UNTagged：传给默认VLAN

  ②ID为默认ID：去掉标签再发送给默认端口

  ③ID为允许VLANID时：保持原样发送

  ④都不满足：丢弃

* Access

  只能属于一个VLAN，一般用于连接计算机接口

  能接收以下三种帧：

  ①Un Tagged：为无标签帧添加默认VLAN标签，然后准备发出去，发送帧前先去掉帧上附带的VLAN标签，在发送

  ② VLANID为Access接口所属的 ：接收，并在发送前去掉VLAN标签后再发送

  ③VLAN ID为0的Tagged帧：接收该帧，ID为0是用于识别帧的优先级

## VLAN间通信

* 单臂路由

  路由可以从某一个VLAN接收数据包，然后将这个数据包传递给另一个VLAN，需要在路由上的一个物理接口上启用子接口  P89

* 三层交换机

  带路由功能的交换机，在三层交换机上创建各个VLAN的虚拟接口（Switch virtual interface -- SVI） 并设置IP地址

![](https://ws1.sinaimg.cn/large/0067fcixly1fynmvnx44tj30ik0c4q6f.jpg)

* ### 简述VLAN的概念，为什么需要使用VLAN？

  VLAN：虚拟局域网，是指位于一个或多个局域网的设备经过配置能够像连接到同一个信道一样进行通信，而实际上他们分布在不同的局域网段里。

  用处：

  通过在局域网内使用VLAN

  ①可以很好地控制不必要的广播报文的扩散。提高了网络内带宽资源的利用率，也减少了主机接收这些不必要的广播所带来的资源浪费

  ②可以强化网络安全。只要人员在同一个基于二层的网络内，数据、资源就有可能不安全，利用VLAN技术限制不同工作组间的用户二层之间互访，这个问题就可以得到很好的解决。

  ③可以强化网络管理功能。可以根据用户的组织结构进行划分，可以突破共享网络中的地理位置限制。

* ### VLAN有哪些定义方法？

  ①基于端口的定义：根据以太网交换机的端口来划分，实际上就是交换机上某些端口的集合

  ②基于MAC地址的VLAN：根据每个主机网卡的MAC地址来分，即每个MAC地址都被固定地配置属于哪个VLAN

  ③基于网络层的VLAN：根据每个主机的网络层地址或协议类型划分

  ④基于IP组播的VLAN：依据组播划分，即认为一个组播组就是一个VLAN

* ### 802.1Q的标签中，各个字段的用途是什么？

  ①TPID：标签协议标识字段，值固定为0x8100，说明该帧具有802.1q标签

  ②TCI：标签控制信息字段，包括用户的优先级（priority）、规范格式指示器（CFI）和VLAN ID

  ​	priority：优先级，用于表示当交换机发生拥塞时，优先转发哪个数据包

  ​	CFI：这一位主要用于总线型的以太网与FDDI、令牌环网交换数据时的帧格式。在以太网交换机中这个常置0

  ​	VLAN ID：12位的域，指明VLAN的ID。理论上支持4096（2^12）个VLAN，但是VLAN ID=0 用于识别帧优先

  ​	级，4095作为预留值，所以VLAN配置的**最大可能值为4094**

* ### Access端口是如何收发帧的？

  Access端口发出的数据帧是不带IEEE 802.1q标签的，且它只能**接受**以下三种格式的帧：

  ①UnTagged：

  ​	接收不带IEEE 802.1q标签的帧，并为无标签帧添加缺省VLAN的标签，然后发送出去。

  ​	发送前。则去掉帧上附带的VLAN标签，再发送

  ②Tagged帧（分三种，0，与当前相应的，都不是的）：

  ​	0：接收，在标签中，VLAN ID=0 是用于标识帧优先级的

  ​	与当前相应的：接收，并在发送时去掉VLAN标签后再发送

  ​	都不是（不同，也不为0）：丢弃

  ​	

* ### 在一台锐捷交换机上配置VLAN5（名称为abc），将端口F0/10-f0/20添加到VLAN5，并将F0/1端口设置成Trunk端口，应该如何配置？

```txt
Switch(config)#vlan 5  
Switch(config-vlan)#name abc 
Switch(config-vlan)#exit  
Switch(config)#interface range fastEthernet 0/10-20 
Switch(config-if-range)#switchport mode access 
Switch(config-if-range)#switchport access vlan 5 
Switch(config-if-range)#exit  
Switch(config)#interface fastEthernet 0/1 
Switch(config-if)#switchport mode trunk 
Switch(config-if)#end 
Switch# 
```

* ### 为什么需要三层设备才能实现VLAN间的通信？

  VLAN间的通信等同于**不同广播域**之间的通信，必须使用第三层设备才能实现。

  VLAN之间的通信就是指**VLAN间的路由**，是VLAN之间在一个路由器或者其他三层设备上发生路由。

* ### 目前有哪些方法可以实现VLAN间的通信？

  两种：单臂路由的方式实现  或  三层交换机以三层交换的方式实现

  单臂路由：在一个路由器的物理接口上启用子接口，也就是将以太网物理接口划分为多个逻辑的、可编址的接口，并配置成干道模式，每个VLAN对应一个这样的接口，这样路由器就能够知道如何到达这些互联的VLAN，得以实现

  三层交换：在三层交换机内为每个VLAN启用SVI交换虚拟接口，在这些接口上配置网络层地址，成为每个VLAN的网关，即可实现

# 第四章

为解决单点故障问题，引入了冗余。但是会出现**广播风暴和多帧复制以及MAC地址表抖动**

广播风暴：在没有避免交换换路措施的情况下，每个交换机都无穷无尽地转发广播帧

多帧复制：单播的数据帧可能被多次复制传送到目的站点

MAC地址表抖动：MAC地址表不稳定，这是由于相同帧的拷贝在交换机的不同端口上被接收引起的。

## 生成树协议（IEEE 802.d）

cost:

```txt
10G				2

1000MB			4

100Mb			19

10Mb  			100

```

主要思想：当网络中存在备份链路时，只允许主链路激活。如果主链路因故障而被断开后，备用链路才会被打开。当交换机存在多条链路时，交换机的生成树算法只启动最主要的一条链路，而其他链路都会被阻塞，并变为备用链路。

* 根交换机

  选举：每个交换机在刚开始都会假定自己是根网桥，把自己的网桥ID写入BPDU里，当自己接收到一个更低的Root ID时，就将自己发送的BPDU中的该字段给替换掉，再往外发送。一段时间后会收敛。

* 根端口

  选举：从当前网桥到达根网桥的最短路径上的端口（最低成本）

* 指定端口

  根交换机上的端口都是指定端口

  其他网段则选：路径成本最小、网桥ID最小、端口ID最小

* 路径开销

  根路径成本就是到根网桥的路径中所有链路路径成本之和。

* 生成树算法（SPA）

  * 桥接协议数据单元（BPDU）

    所有的功能都是通过交换机或者网桥之间周期性地发送BPDU实现的，每2秒发送一次报文。他是一个二层报文，目的MAC地址是**多播地址**01-80-C2-00-00-00，所有支持STP的交换机都会接收和处理该报文

    当交换机的一个端口收到高优先级的BPDU（更小的root BID或者更小的 Root path cost），就**保存**该信息，并向所有端口**更新并传播**信息，否则丢弃信息

    基于以上操作，就能得到以下结果：

    ①网络中选择了一个交换机为**根网桥**

    ​	拥有**最低网**桥ID的交换机为根网桥

    ②每个交换机都计算**到根网桥的最短路径**

    ③除根网桥外的每个交换机都有一个**根端口**，即提供最短路径到根网桥的端口

    ④每个LAN都有了指定交换机，位于该LAN与根交换机之间的最短路径中，指定交换机与LAN相连的端口称为**指定端口**。

    ⑤根端口和指定端口进入**转发（Forwarding）状态**

    ⑥其他的冗余端口就处于**阻塞状态（Blocking）**

* 端口状态：

  交换机加电启动后，自动进入阻塞状态，从这个状态开始监听BPDU，如果一个网络上的所有端口都进入了转发和阻塞，那么就收敛了。

  ①阻塞：只能接收BPDU，不能接受或传输数据，不能学习MAC地址

  ②监听：选举根端口或者指定端口时的状态，就是监听。不能接受和传输数据。不能学习MAC地址，可以接收和发送BPDU，若没有资格成为根端口或者指定端口，就自动blocking

  ③学习：在转发延时超过设定时间时（默认15秒）进入学习状态，不能传输数据。只能发送和接受BPDU，可以学习MAC地址

  ④转发：能接收和发送数据

  ![](https://img-blog.csdn.net/2018091909333712?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3NjUzMTQ0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

* 拓扑变更

  每次网络拓扑改变时都会重新计算一次STP发生变化的交换机会在它的根端口上每隔hello time时间就发送拓扑变化通知BPDU（TCN BPDU），直到生成树上游的指定网桥邻居确认了该TCN为止，当网桥收到后，会发送设置了TC（拓扑变化）位的BPDU，通知整个网络发生了变化。

  P115页的图！

  会出现临时环路的问题——新的配置消息要经过一定时延才能传播到整个网络，在所有网桥收到变化消息之前，若旧拓扑结构中处于转发的端口还没有发现自己应该在新的拓扑中停止转发，就有可能出现临时环路。以前是在阻塞态和转发态之间加了一个学习态，但是很费时。所以引入了RSTP

## 快速生成树协议（802.1w）

* 在STP基础上增加了两种新端口：**替代**、**备份**

* 端口只有三种状态：**丢弃**、**学习**、**转发**

​	丢弃：对应了STP中的禁用、阻塞和监听

* 稳定状态下，根端口和指定端口处于转发状态，而替代端口和备份端口处于丢弃状态。RSTP可以主动地将端口转变为转发状态。无须时延等待为此加入了两个新变量：**边缘端口**（连接终端的端口，不可能导致环路，可直接变为转发态）和**链路类型（全双工）**

* 机制：

  依赖于桥握手机制，而不是计时器。利用交换机不断发送BPDU作为保持本地连接的方式。P117

  #### ==RSTP的优点==

  * 为根端口和指定端口设置了快速切换用的替换端口和备用端口，当根/指定端口失效时可以快速无时延地进入转发状态
  * 在只连接了两个交换端口的点对点链路中指定端口只需与下游网桥进行一次握手就可以无时延地进入转发状态，如果是连接了三个以上网桥的共享链路，下游网桥是不会影响上有指定端口发出的握手请求的，只能等待两倍的Forwarding Delay时间进入转发状态
  * 新增边缘端口，让其可以直接进入转发状态，不需要时延（需要人工配置）

   ```txt
  	在RSTP中，端口新增了备用端口和备份端口两个角色，以便网络拓扑结构发生变化时能快速找出一个备选方案。此外，端口状态还从5个减少到3个（丢弃、学习和转发），RSTP的丢弃状态代替了STP中的禁止、阻塞和侦听。
  	由于RSTP只使用一种类型的BPDU，因此没有专门的拓扑变化BPDU。在RSTP中，检测到一次拓扑变化的网桥会发送一个表示拓扑变化的BPDU，任何接收到它的网桥会立即清除自己的过滤数据库。这时，无需等待拓扑变化传递到根网桥再经过转发延迟后返回，而是立即清除条目，这个改变显著减少了收敛时间。
  	RSTP将边缘端口特殊对待。边缘端口和点到点链路上的端口通常不会形成环路，因此RSTP允许它们直接进入转发状态。
  
  
  对于生成树的维护，在STP中，BPDU通常情况下由通知网桥或根端网桥来发送，而RSTP则允许所有网桥定期发送，以便确定相邻网桥是否正常运行。当某一网桥检测到拓扑变化时，它会向所有相邻网桥都发送TC BPDU，这样可以更快地将拓扑变化通知到整个网络。当一个网桥接收到这一信息时，它会更新除边缘端口以外的所有条目。
  
   ```

* 为了兼容STP，提出了**协议迁移 **（如果相连的是STP，那就发STP）

## 以太网端口聚合

* ### 端口聚合

  将多个物理接口捆绑在一起，形成一个逻辑端口，称为聚合端口，聚合端口的成员端口类型可以为Access也可以为Trunk，但是同一个AP的成员端口必须为同一个类型.

  注意：

  ①AP成员端口的速率必须一样

  ②AP成员端口必须属于同一个VLAN

  ③AP成员端口使用的传输介质赢相同

  ④默认情况下创建的是二层AP

  ⑤二层端口只能加入二层AP，三层同理

  ⑥AP不能设置端口安全功能

  ⑦当把端口加入一个不存在的AP时，会自动创建

  ⑧当把一个端口加入到一个AP时，该端口的属性会被AP的属性所取代

  ⑨当把一个端口从AP里干掉时，AP会恢复成加入端口前的配置。

  ⑩当一个端口加入AP后，不能为端口进行配置，只能等他退出才行

* ### 流量平衡

  Ap会根据报文的MAC地址或IP地址进行流量平衡

* ### 交换网络中，链路备份的技术有哪些？

  交换网络中，可以进行链路备份但又不会产生交换环路的技术有STP生成树协议和端口聚合。其中STP又发展出RSTP快速生成树协议和MSTP多生成树协议等技术

* ### 生成树的作用是什么？

  维持一个无环的拓扑结构。当交换机或者网桥发现拓扑中存在环路时，就会逻辑地阻塞一个或更多个冗余端口，解决由于备份连接所产生的环路问题

* ### STP的工作过程是怎么样的 ？ ### 重点

  主要思想：当网络中存在备份链路时，只允许主链路激活，如果主链路因故障而被断开后，备用链路才会被打开。

  当交换机之间存在多条链路时，交换机的生成树算法只启动最主要的一条链路，而将其他链路都阻塞掉，并让其变为备用链路。当主链路出问题时，自动启用备用链路接替主链路的工作，不需要任何人工干预。

  STP首先会选举根网桥，再在非根网桥上选举根端口，在每一个网段选举出指定端口，然后阻塞非根非指定端口，就可构造出无环路的拓扑。

* ### 非根网桥上如何确定根端口？

  权重顺序为：①根路径成本最小	②发送网桥ID最小	③发送端口ID最小

* ### STP和RSTP的区别有什么？  ###重点

  **STP**：

  ①三种端口角色：根端口、指定端口、阻塞端口

  ②端口有五种状态：禁用、阻塞、监听、学习、转发

  ③根据计时器更新拓扑

  ④非网桥的根端口收到来自根网桥的BPDU后，会重新生成一份BPDU朝下游交换机发送出去。

  ⑤连接丢失不会引起拓扑结构的变化

  ⑥TCN先单独传送给根桥。然后再多点传送到其他网桥，接受TCN将使网桥快速老化转发表格中的所有条目，而不考虑网桥转发拓扑结构是否受到了影响

  **RSTP**：

  ①五种端口角色：根端口、指定端口、替代端口、备份端口、边缘端口

  ②端口有三种状态：丢弃、学习、转发

  ③依赖于**桥握手机制**维持结构

  ④每个交换机在BPDU hello time（默认2s）的时间里生成BPDU发送出去，即使没有从根桥那里接收到任何BPDU。如果交换机连续三次未收到BPDU，那么它将认为丢失了到达相邻交换机根端口或者指定端口的连接。

  ⑤仅当非边缘端口转为转发状态时，拓扑结构才会发生变化。

  ⑥明确通知网桥保留通过接受TCN端口所学习的条目，因而使这项工作得到了最优化

  定义了边缘端口和点对点的链路类型，可以主动地将端口立即转变为转发状态，而无需通过调整计时器的方式去缩短收敛时间。

* ### 什么是端口聚合？为什么要使用端口聚合？

  端口聚合：将多个物理接口捆绑在一起形成一个简单的逻辑接口。这个逻辑接口称为聚合端口（Aggregate Port）

  为什么：AP是链路扩展的一个重要途径，它可以把多个端口的带宽叠加起来使用，此外通过聚合端口发送的帧还将在所有成员端口上进行流量平衡，如果AP中的一条成员链路失效，聚合端口会自动将这个链路上的流量转移到其他有效成员上，提高了可靠性

* ### 配置端口聚合技术需要注意哪些事项？

  ①AP成员端口的速率必须一样

  ②AP成员端口必须属于同一个VLAN

  ③AP成员端口使用的传输介质赢相同

  ④默认情况下创建的是二层AP

  ⑤二层端口只能加入二层AP，三层同理

  ⑥AP不能设置端口安全功能

  ⑦当把端口加入一个不存在的AP时，会自动创建

  ⑧当把一个端口加入到一个AP时，该端口的属性会被AP的属性所取代

  ⑨当把一个端口从AP里干掉时，AP会恢复成加入端口前的配置。

  ⑩当一个端口加入AP后，不能为端口进行配置，只能等他退出才行

# 第五章

## IP协议

* ## IPV4

  网络号：掩码与运算后的结果，剩下的是主机号

  A: 0.0.0.0-127.255.255.255，其中段0和127不可用

  B: 128.0.0.0-191.255.255.255    

  C: 192.0.0.0-223.255.255.255

  D: 224.0.0.0-239.255.255.255

  E: 240.0.0.0-255.255.255.255，其中段255不可用

  ![](https://img-blog.csdn.net/20180301143821937)

* ### 划分子网  ###重点

```txt
案例二：255.255.255.192 (/26) 
在第二个示例中，我们将使用子网掩码255.255.255.192对网络192.168.10.0进行子网划分。 
网络地址=192.168.10.0 
子网掩码=255.255.255.192 
下面来回答五大问题 

多少个子网? 
在192(11000000)中，取值为1的位数为2，因此答案为2^2=4个子网。

每个子网多少台主机?
有6个主机位的取值为o(11000000)，因此答案是2^6-2=62台主机。 

有哪些合法的子网? 
256 -192 = 64。所以子网的步长[增量]为64，因此子网为0、64、128和192

每个子网的广播地址是什么? 
在下一个子网之前的数字中，所有主机位的取值都为1，是当前子网的广播地址。对于子网0，下一个子网为64，因此其广播地址为63。以此类推。

合法的主机地址有哪些? 
合法的主机地址为子网地址和广播地址之间的数字。要确定主机地址，最简单的方法是写出子网地址和广播地址，这样合法的主机地址就显而易见了。


广播地址是在网络地址的基础上，将网络号右边的表示IP地址的主机部分的二进制全部填上1，再将得到的二进制转化为十进制就可以得到广播地址。
```

![](https://img-blog.csdn.net/20180301152307452)

![](https://ws1.sinaimg.cn/large/0067fcixly1fyvt2f90plj30qr0istfb.jpg)![](https://ws1.sinaimg.cn/large/0067fcixly1fyvx4em59kj30nm0h67ac.jpg)

![](https://ws1.sinaimg.cn/large/0067fcixly1fyvx7c5ytij30jt08ljul.jpg)

* ### 一台二层的交换机 ， 如果不划分VLAN ， 那么它所有的端口都在一个广播域内 。 二层交换机的确是通过MAC 地址来识别目标端口的 ， 在此之前还有一个源主机获取目标主机MAC 地址的过程 ， 即ARP 请求。 。 ARP 请求会被广播到交换机的每一个端口 ， 即不论A 网还是B 网的主机都将接收到来自某台主机的ARP 请求 ， 网卡 会根据ARP 请求的IP 地址来决定直接丢弃该ARP 请求包或是回应该ARP 请求包 。 那么既然A 网主机B 网主机都能收到来自某台主机的ARP 请求 ， 是否A 网就可以和B 网通信了 ？  

  不能 。

  A 网主机和B 网主机不在一个网段内 ，设 假设 A 网地址段为:192.168.10.0/24 ； B 网地址段为:192.168.20.0/24 ；A 网主机X 若想直接和B 网主机Y 通信 ，X 不会直接发送ARP 请求包去请求Y 的MAC 地址 ， 而是去请求X 主机所在网段 （A 网 ） 的网关的MAC 地址 ， 若没有设置网关 ， 则网卡会直接告知系统：“Destinationhost unreachable.” ， 将通信放弃 。所以即使交换机的端口都在一个广播域内，也不用担心A网和B 网会相互通信。  

  如果可以，建议将二层交换机划分成两个VLAN ，分别包括A 网主机所连端口和B 网主机所连端口。这样就把该交换机的所有端口划分成了两个广播域，即A 网的主机不在收到来自B 网主机的ARP 广播包，B 网主机如是。  这样可以减少网络开销，降低局域网攻击导致的危害，防范A 网主机擅自更改IP 上网。  最后申明，二层交换机不论划分VLAN 与否都可以实现两个网段的各自通信 。

   补充：通信中的目标主机如果和本机在同一个网段，则本机向交换机发出的ARP 广播包中请求的是**目标主机**的MAC地址； 如果通信的目标主机和本机不在同一个网段，则本机向交换机发出的ARP 广播包中请求的是**网关**（或者是指定下一跳路由）的MAC地址

#### IPV6的好处

• 更大的地址空间
• 更高效的路由基础结构
• 更好的安全性
• 移动性
• 更好的服务质量 (QoS)

```txt
1 、IP  提供的服务为何被称为是尽力而为的？  
IP 只能提供尽力而为的传输服务，因为它提供的数据包传送服务是不可靠和无连接的，不能保证数据包在传输过程中不丢失、不出错。不可靠（unreliable）的意思是它不能保证 IP 数据报能成功地到达目的地。IP 仅提供最好的传输服务。如果发生某种错误时，如某个路由器暂时用完了缓冲区， IP 有一个简单的错误处理算法：丢弃该数据报，然后发送 ICMP 消息报给信源端。任何要求的可靠性必须由上层来提供（如 TCP） 。无连接（connectionless）这个术语的意思是 IP 并不维护任何关于后续数据报的状态信息。每个数据报的处理是相互独立的。这也说明，IP 数据报可以不按发送顺序接收。如果一信源向相同的信宿发送两个连续的数据报（先是 A，然后是 B） ，每个数据报都是独立地进行路由选择，可能选择不同的路线，因此 B 可能在 A 到达之前先到达。  


2 、IPv4  如何实现 IP  报文的分片和重组？  
IPv4 依靠标识、标志和段偏移这三个字段来实现报文的分片与重组。标识字段标识分段属于哪个特定的数据包。 它是一个计数器，当 IP 协议发送数据报时，他就将这个计数器的当前值复制到标识字段中。 如果数据报要进行分片， 则将这个值复制到每一个分片后的数据报片中。 这些数据报片到了接收端， 就按照标识字段的值使这些分片后的数据报片重组成为原来的数据报。  标志则用于指示当前的分片是否最后一个分片，以及是否允许分片。  段偏移字段则指出当前分片在原分组中的相对位置。 也就是说， 相对于用户数据字段的 起点，该片从何处开始。   


3 、IPv4  的地址如何构成？  
IPv4 的地址是 32 位的二进制代码。它包含了两个独立的信息段：网络号（net-id）和主机号（host-id） 。网络号用来标识主机或路由器所连接到的网络，主机号用来标识该主机或路由器。子网掩码用于区分一个 IP 地址中的网络号和主机号，它的形式和 IP 地址一样，长度也是 32 位，从左端开始的连续二进制数字“1”表示 IP 地址的 32 位 2 进制数字中有多少位属于网络号；剩余的二进制数字“0”则表示主机号是哪些位。IPv4 地址一般使用点分十进制记法来表示。   


4 、在 IPv4  网络中，为什么需要划分子网？  
划分子网可以提高 IP 地址的使用效率，节约 IP 地址资源。同时，将一个网络通过子网的方式划分为多个较小的广播域，也可以减少网络内不必要的广播，提高网络传输性能。另外，子网编址使得 IP 地址具有一定的内部层次结构，这种层次结构便于 IP 地址分配和管理。 它的使用关键在于选择合适的层次结构，使得网络地址既能适应各种现实的物理网络规模，又能充分地利用 IP 地址空间（即从何处分隔子网号和主机号来决定） 。   


5 、IPv4  的不足之处有哪些？ IPv4 在实际使用中存在许多问题：
    地址空间使用效率比较低。例如，当一个组织得到一个 A 类地址时，就有 1600 多万个地址被该组织独占， 即便这个组织可能永远也不会有超过 100 万台计算机； 在D 类和 E 类地址中，地址的浪费也是惊人的。虽然 NAT 等策略能够减轻所遇到的问题，但这也使得路由更加复杂。
    对服务质量没有保障。 随着各种应用的出现， 人们要求因特网必须能够适应实时的音频和视频的传输。这些类型的传输需要最小时延的策略和预留资源，却在 IPv4的设计中并没有提供。由于受其诞生时代背景的影响，IPv4 对于移动特性并没有很好的支持。对于某些应用，因特网必须能够对数据进行加密和鉴别，但 IPv4 不提供数据的加 密和鉴别。
    
 
 6 、IPv6  的包头和 IPv4  相比有哪些变化？  
 IPv6 对数据报头作了简化，以减少处理器开销并节省网络带宽。IPv6 的报头由一个基本报头和多个扩展报头（Extension Header）构成，基本报头具有固定的长度（40 字节） ，放置所有路由器都需要处理的信息。由于 Internet 上的绝大部分包都只是被路由器简单的转发，因此固定的报头长度有助于加快路由速度。IPv4 的报头有 13 个字段，而 IPv6 的只有 8 个字段，减少的字段包括：
   首部长度字段。IPv4 的报头长度是由首部长度域来指定的，而 IPv6 的是固定 40个字节。这就使得路由器在处理 IPv6 报头时显得更为轻松。
    标识、标志、段偏移字段。标识、标志和分段偏移这三个字段被用于对数据进行分片和重装，而在 IPv6 中，分片只发生在源端，而重装只发生在目的端，中间的路由器不作分片和重装的工作。 在 IPv6 中， 主机通过一个叫做路径 MTU 发现 （PathMTU Discovery）的过程来了解路径最大传输单元（Maximum Transmission Unit，MTU）的大小。如果 IPv6 的发送主机想要对数据包进行分段，就需要使用扩展包头来实现。数据包传输路径上的 IPv6 路由器不像在 IPv4 中那样进行数据分段。因此，在 IPv6 中去除了标识、标志和段偏移字段。如果必须分片的话，则插入一个扩展包头来实现。
    首部校验和字段。 对于数据的完整性， 由于在第二层和第四层都提供了校验的机制，所以，在 IPv6 的设计时，就不再有校验这个字段出现。这样可以提高处理速度。如果路由器无需检验并更新校验和，则处理会变得更快。
    选项字段。由于选项的存在，IPv4 首部长度可变，这使得每一个中间路由器处理IP 分组的难度都增大了，为此，IPv6 中取消了分组首部长度可变的设计，选项的内容被扩展包头所取代，这使得 IPv6 变得极其灵活，扩展包头只有在必要的时候才需要检查和处理， 能提供对多种应用的强力支持， 同时又为以后支持新的应用提供了可能。  增加的字段则是流标签。IPv6 中实现了流概念，以规定中间路由器如何对数据包进行处理。IPv6 的中间节点接收到一个信息包时，通过验证它的流标签，就可以判断它属于哪个流，然后就可以知道信息包的 QoS 需求，进行快速的转发。流概念的引入，使得中间传输 IPv6 包的路由器不需要通过查看包里面的内容再决定传输的方式，这在加密和一些别的应用中尤其有用。
    
    
    
7 、IPv6  具有哪些特点？  IPv6 和 IPv4 相比具有以下的特点：
   更大的地址空间
    更高效的路由基础结构
   更好的安全性
   移动性
    更好的服务质量 (QoS)

```

# 第六章

* ### 什么是路由选择协议？

  路由选择协议是路由器之间所讲的一种语言，用来共享网络目标地址的信息。

* ### 为什么路由选择协议使用度量？

  路由的度量值，也叫做路由代价或路由距离，用来决定到达一个目的的最佳路径，最佳路径所使用的度量值类型定义。

* ### 什么是收敛时间？

  一级路由器所花费用来完成路由信息交换的时间

* ### 动态路由协议与静态路由协议的区别？###重点

  静态：无开销，配置简单，需要人工维护，管理困难，适合简单拓扑结构的网络。

  动态：开销大，配置复杂，无需人工维护，适合复杂拓扑结构的网络。

  静态：

  ​	静态路由是指由用户或网络管理员手工配置的路由信息。当网络的拓扑结构或链路的状态发生变化时，网络管理	

  ​	员需要手工去修改路由表中相关的静态路由信息。静态路由信息在缺省情况下是私有的，不会传递给其他的路由

  ​	器。当然，网管员也可以通过对路由器进行设置使之成为共享的。静态路由一般适用于比较简单的网络环境，在	

  ​	这样的环境中，网络管理员易于清楚地了解网络的拓扑结构，便于设置正确的路由信息。

  动态：
  ​	•  要求网络中运行相同的路由协议
  ​	•  所有运行了路由协议的路由器会将本设备相关路由信息发送给网络中其他的路由器
  ​	•  所有路由器会根据所学的信息产生相应网段的路由信息
  ​	•  所有路由器会每隔一段时间向邻居通告本机的状态（路由更新）

* ### 路由选择表中需要保存哪些信息？

  路由选择表中每一个表项至少要包含**目标地址** 和**下一跳路由器的地址**，或表明目标地址是相连的

* ###  什么是浮动静态路由？浮动静态路由通常应用在什么场景？ ##重点

  浮动静态路由是一种特殊的静态路由，通过配置一个比主路由的管理距离更大的静态路由，保证网络中主路由失效的情况下，提供备份路由。但在主路由存在的情况下它不会出现在路由表中。浮动静态路由主要用于拔号备份.

  当网络中有多条路径到达目的网络时，可以通过配置静态浮动路由，来实现主备链路的备份。

# 第七章

## RIP路由协议

* 定义： RIP 路由协议是一种距离矢量路由选择协议。它根据数据由源端到目标端所经过的3 层设备的数量来判断路径

  ​	    的优劣

* 工作原理：

  ①运行RIP路由协议的路由器默认每30S广播发送完整的路由表到相邻的RIP路由器

  ②相邻路由器接收并学习

* 跳数：一个报文从本节点到目的节点中途经过的3 层设备次数，通常也就是一个包到达目标所必须经过的路由器的数

  ​           目

* 下一跳：本网络的报文欲到达目标节点，如不能直接送达，则本节点应把此报文送到某个中转站点，此中转站点称为 

  ​	      下一跳

* 特点：

  ①最多支持15跳，16为不可到达，跳数最小为最优路由，相同为负载均衡

  ②使用广播UDP 520端口交换路由信息

  ③周期性更新，更新为完整的路由表

  ④使用多个计时器以保证路由条目的有效性与及时性

* 计时器：

  更新计时器：30s（为了防止同时更新，一般叠加一个5s以内的随机数）

  无效计时器：180s，3倍更新时间，否则标记为16跳

  抑制计时器：180S，无效计时器到时抑制计时器立即启动

  刷新计时器：120s

  ![](https://ws1.sinaimg.cn/large/0067fcixly1fyw201wk3yj30kh03it9i.jpg)

### 路由环路

数据在路由网络上不断的循环传输，无法到达目标网络的现象

原因：

​	①静态路由配置错误

​	②路由重分布配置错误

​	③发生了改变的网络中收敛速度缓慢，不一致的路由表未能得到更新

​	④错误配置或添加了丢弃的路由

**解决方法**：

* 路由毒化：

  路由失效后，把metirc值改成16然后发出去，接到此条路由的都会删除原有的路有条目。

* 水平分割：

  目的：解决路由器收到自己发出的路由信息，并且这个信息还是不正确的，从而导致出现环路

  做法：路由器从某个接口接收到的更新信息不允许再从这个接口发回去（记住每一条路由信息的来源）

* 触发更新：

  路由器路由信息产生改变时立即发送给相邻路由器。

* 毒性逆转：

  实际上是一种改进的水平分割，这种方法的运作原理是：路由器从某个接口上接收到某个网段的路由信息之后，并不是不往回发送信息了，而是发 送，只不过是将这个网段标志为不可达，再发送出去。收到此种的路由信息后，接收方路由器会立刻抛弃该路由，而不是等待其老化时间到（Age Out）。这样可以加速路由的收敛

* 抑制计时器（时间一般是180S）

  当路由器接收到一条毒化路由，就会为这条路由启动抑制计时器，在抑制时间内，这条失效的路由不接受任何更新信息，除非是原始通告这条信息的路由发来的。

### RIPv1

​	①使用广播的方式发送路由更新
​	②路由更新信息中不携带子网掩码，有类路由协议
​	③RIP 报文大小限制是512 字节，最多可以携带25 条路由信息

### RIPv2

​	①RIPv2 发送更新报文的方式为组播，组播地址为224.0.0.9
​	②路由信息中加入了子网掩码，无类的路由协议
​	③支持认证

![](https://ws1.sinaimg.cn/large/0067fcixgy1fyw2abtrdej30jv0dsq79.jpg)

![](https://ws1.sinaimg.cn/large/0067fcixgy1fyw2aq4w24j30ku0dlgpc.jpg)



# 补讲

## 路由重分发

指连接到不同路由选择域的边界路由器在不同路由选择域之间交换和通告路由选择信息的能力

## 路由控制

* ### 路由过滤

  对进出站路由进行控制，使得路由器只学到必要、可预知的路由，对外只向可信任的路由器通告必要的、可预知的路由

* ### 被动接口

  为防止本地网络上的路由器动态地学到路由协议，可以通过配置passive-interface，不允许路由更新报文从该网络接口发送出去

## 策略路由

是一种入站机制，用于入站报文，能根据数据包的源地址、目的地址、源端口、目的端口和协议类型让报文选择不同的路径

## VRRP虚拟路由器冗余协议

用于实现路由器冗余的协议，在该协议中，对共享多存取访问介质上终端IP设备的默认网关进行冗余备份，从而在其中一台路由设备出问题时，备份路由设备及时接管转发工作，向用户提供透明的切换，提高了网络服务质量。

好处：

​	①能够从网络层保证网络系统的高度冗余，同时也能够实现网络流量的负载均衡。

​	②也被设计用来实现IP传输失败情况下的不中断服务

适用：

​	①广播网静态路由配置，如主机使用的缺省网关设置的静态路由

​	②广播或多播局域网上的路由器热备份，并适于静态的路由配置，其实它正是解决设备不能够动态适应路由改变问题

* ### 基本概念

  VRRP路由器：

  运行VRRP 协议的路由器，一台VRRP 路由器可以同时参与到多个VRRP 组中，在不同的组中，一台VRRP路 路由器可以充当不同的角色（主，备份）



   MASTER 路由器：

  VRRP 组实际转发数据包的路由器，负责ARP 相应和转发IP



  VRRP组：

  由多个VRRP 路由器组成，属于同一VRRP 组的VRRP路由器互相交换信息，来决定主、备份路由器，以及判断主路由器是否失效。



   BACKUP 路由器：

  VRRP 组中处于监听状态的路由器，一旦MASTER 路由器出现故障， BACKUP 路由器就开始接替工作。



  虚拟路由器：

  对于每一个VRRP 组，抽象出来的一个逻辑路由器，该路由器充当网络用户的网关，对外表现为一个具有唯一固定IP 和MAC 地址的逻辑路由器。



  虚拟IP 地址、MAC 地址：用于标示虚拟的路由器，该地址实际上就是用户的默认网关

* ### 三种状态

  ①Initialize状态

  系统启动后进入此状态，当收到接口up的消息，将转入Backup或Master状态。在此状态时，路由器不会对VRRP报文做任何处理

  ②Master状态

  定期发送VRRP组播报文，相应对虚拟IP地址的ARP请求，并且相应的是虚拟MAC地址，而不是接口的真实IP地址。当接收到比自己优先级高的VRRP报文时，才会转为Backup状态。只有接收到接口的shutdown事件时才会转为Initialize

  ③Backup状态

  接收Master发送的VRRP报文，从中了解Master的状态。对虚拟IP地址的ARP请求不做响应。丢弃目的MAC地址为虚拟MAC地址的IP报文。丢弃目的IP地址为虚拟IP地址的IP报文。

* ### 工作机制

  ![](https://ws1.sinaimg.cn/large/0067fcixly1fywtn5z1utj30ia0dmtd7.jpg)

  抢占模式：Backup收到VRRP通告报文后，会将自己的优先级与报告报文中的进行比较，若自己的高，就替换掉Master。

  非抢占式：只要Master没有出现故障，Backup就始终保持原样

# 第八章

## NAT（网络地址转换）

一种大型网络中节约注册IP地址数量，并简化IP寻址管理任务的机制。——允许一个整体机构以一个公用IP地址出现在Internet上

* ### 实现方式：

  代理服务器、NAT/NAPT（网络地址转换/网络地址端口转化）

  NAT：

  一个本地IP地址对应一个全局IP地址

  NAPT：

  多个本地地址对应一个全局地址

* ### 术语：

  Inside:

  表示内部网络，这些网络的地址需要被转换。在内部网络，每台主机都分配一个内部IP 地址，但与外部网络通讯时，又表现为另外一个地址。每台主机的前一个地址又称为本地地址，后一个地址又称为全局地址。

  Outside：

  指内部网络需要连接的网络，一般指互联网，也可以是另外一个机构的网络。外部的地址也可以被转换，外部主机也同时具有内部地址和外部地址。

  静态NAT：

  手动建立一个内部IP地址到外部IP地址的映射关系（适用于企业网的内部设备需要被外部网络访问到的场合）

  动态NAT：

  讲一个内部IP地址转换为一组外部IP地址（地址池）中的一个地址（常用于整个公司公用多个公网IP地址访问Internet）

  超载NAT：

  动态NAT的一种特殊形式，利用不同端口号将多个内部IP地址转换为一个外部IP地址。

  重载NAT：

  当在内部网络中使用的IP地址是其他网络中已经使用的地址时，就需要维护一张查找表，以便用唯一的IP地址来替换这些重复的IP地址。

## DHCP（动态主机配置协议）

DHCP就是一个不需要账号密码登录的、自动给内网机器分配IP地址等信息的协议。	

​	必须在网络中部署一台拥有静态IP地址的DHCP服务器，而网络中其他计算机则是DHCP客户端。
​	DHCP服务器负责客户端IP地址的集中管理和分配，IP地址数据库存放在服务器上，客户端向DHCP服务器申请和租用IP地址，DHCP服务器可以动态地为客户端自动分配IP地址，也可为特定客户端分配永久IP地址。DHCP服务器为客户机指定的配置参数有些和IP协议并不相关。

* 工作原理

  ①发现阶段：即DHCP客户机寻找DHCP服务器的阶段

  ​	客户机以广播的方式发送DHCP discover发现信息来寻找DHCP服务器，即向255.255.255.255.255发送特定的广

  ​	播信息。网络上每一台安装了TCP/IP协议的主机都会收到这个广播，但只有DHCP服务器会做出响应

  ②提供阶段：即DHCP服务器提供IP地址的阶段

  ​	在网络中接收到DHCP discover发现信息的服务器会做出响应，它从尚未出租的IP地址中挑选一个分配给DHCP

  ​	客户机，向DHCP客户机发送一个包含出租的IP地址和其他设置的DHCP offer提供信息

  ③选择阶段：即客户机选择某台服务器提供的IP地址

  ​	如果有多态服务器向客户机发来DHCP offer提供信息，则客户机只需要接受第一个收到的信息，然后它就以广播

  ​	的方式回答一个DHCP request请求信息.

  ④提供阶段：即DHCP服务器提供IP地址的阶段

  ​	当DHCP服务器收到客户机回答的DHCP request请求信息之后，它就向客户机发送一个包含它提供的IP地址和其

  ​	他设置的DHCP ack确认信息。除选中的服务器外，其他的服务器都将回收曾提供的IP地址

  ⑤重新登录：

  ​	以后的DHCP客户机每次重新登录时，就不需要发送discover了。而是直接发送包含前一次所分配的IP地址的

  ​	request信息。如果服务器能提供就发送一个ack确认信息，如果不行就发送nack否定信息。然后客户机就得重新

  ​	发送discover进行请求

  ⑥更新租约：

  ​	DHCP服务器向DHCP客户机出租的IP地址一般都是有一个租借期限，期限满后就会收回，如果想要延长，就得

  ​	更新租约



  # 第九章

  ### 二层交换机攻击

  ①MAC攻击

  ​	  交换机内部的MAC 地址表空间是有限的，MAC 攻击会很快占满交换机内部的MAC

  ②DHCP攻击

  ​	攻击者伪装DHCP服务器为网络分配地址

  ​	恶意用户通过更换MAC 地址方式向DHCP Server 发送大量的DHCP 请求，以消耗DHCP Server 的可分配IP 地

  ​	址资源为目的；

  ③ARP攻击

  ④IP/MAC欺骗攻击

  ⑤STP攻击

  ​	  发送虚假BPDU ，扰乱网络拓扑和链路架构，充当网络根节点，获取信息

  ### 三层交换机攻击

  ①MAC攻击

  ②DHCP攻击

  ③ARP攻击

  ④IP/MAC欺骗攻击

  **⑤Dos/DDos攻击**

  ​	指故意攻击网络协议的缺陷或者直接通过野蛮手段耗尽攻击目标的资源，目的是让目标计算机或网络无法提供

  ​	正常的服务，甚至系统崩溃。

  **⑥IP扫描攻击**



  ## 交换机的端口安全概述

  •  交换机二层端口上的安全特性
  •  只允许特定MAC 地址的设备接入到网络中，从而防止用户将非法或未授权的设备接入网络
  •  限制端口接入的设备数量，防止用户将过多的设备接入到网络中

  限制：

  •  安全端口必须是Access 端口，而非Trunk 端口
  •  安全端口不能是聚合端口（Aggregate Port） 
  •  安全端口不能是镜像（SPAN）的目的端口


