### 推荐系统

##### precision（精度）

$$
p(k) = \frac{c}{k}
$$

​	给某个用户推荐了k个连接，他点了c个

##### Average Precision ( 平均精度 )

$$
ap(n)=\sum^n_{k=1}\frac{P(k)}{\min(m,n)}
$$

​	n为被预测的链接总数，m是用户点击的链接总数

​	例子：我们一共推荐了10个链接，用户点了我们推荐的1和4，以及另外两个其他的链接，则
​										$ap(10)=\frac{(\frac{1}{1}+\frac{2}{4})}{4}$

​	例子： 我们一共推荐了10个链接，用户实际上点击了我们推荐当中的第2个,第3个和第5个链接，以及另外三

​		     个其他的链接，那么对于这个用户

​										$ap(10)=\frac{(\frac{1}{2}+\frac{2}{3}+\frac{3}{5})}{6}$

##### Mean Average Precision(平均精度均值)

$$
MAP(n) = \sum^N_{i=1}\frac{ap(n)_i}{N}
$$

这个NN是用户数量。

比如说我们三个用户甲、乙、丙分别推荐了10个链接，

甲点击了我们推荐当中的第1个和第4个链接，以及另外两个其他的链接，那么(ap@10)1=(1/1+2/4)/4≈0.38.(ap@10)1=(1/1+2/4)/4≈0.38.

乙点击了我们推荐当中的第3个链接，以及另外一个其他的链接，那么(ap@10)2=(1/3)/2≈0.17.

丙点击了我们推荐当中的第1个链接，第7个链接，以及另外三个其他的链接，那么(ap@10)3=(1/1+2/7)/5≈0.26.(ap@10)3=(1/1+2/7)/5≈0.26.

那么这个模型的平均精度均值MAP@10=(0.38+0.17+0.263)/3≈0.27



### 回归预测

##### R2

1 - ((y_test - y_true)**2).sum() / ((y_true - y_true.mean())**2).sum()