# 目标检测的图像特征提取

> 参考：https://blog.csdn.net/zouxy09/article/details/7929570

## Haar特征

### Haar-like特征最早用于人脸检测

* #### Haar特征

#### Haar特征分为三类：边缘特征、线性特征、中心特征和对角线特征，组合成特征模版。特征模版内有白色和黑色两种矩阵，并定义该模型的特征值为白色矩阵像素和减去黑色矩阵像素和。Haar特征值反映了图像的灰度变化情况。比如：脸部的一些特征能由举证特征简单的描述，例如眼睛比脸颊颜色深、鼻梁两侧比鼻梁颜色深等，但矩阵只对一些简单的图形结构比较敏感如：边缘、线段较敏感，所以只能用来描述有特定走向的结构（水平、垂直、对角）。

![](http://img.my.csdn.net/uploads/201208/31/1346398889_7438.jpg)

##### 对于图中的A,B和D这类特征，特征数值计算公式为：v=Sum白-Sum黑，而对于C来说为：v=Sum白-2*Sum黑，之所以要将黑色区域像素x2是为了使两种矩形中像素数目相同。

##### 通过改变特征模版的大小和位子，可以在图像子窗口中穷举出大量的特征。上面的特征模版称为“特征原型”，特征原型在图像子窗口中扩展（平移伸缩）得到的特征值称为“矩形特征”，矩形特征的值称为“特征值”。矩形特征可位于图像任意位置，大小也可以任意改变，所以矩形特征值是矩形模版类别、矩形位置和矩形大小这三个因素的函数。故类别、大小和位置的变化，使得很小的检测窗口含有非常多的矩形特征，如：在24*24像素大小的检测窗口内矩形特征数量可以达到16万个。这样就有两个问题需要解决了：（1）如何快速计算那么多的特征？---积分图大显神通；（2）哪些矩形特征才是对分类器分类最有效的？---如通过AdaBoost算法来训练（这一块这里不讨论，具体见<http://blog.csdn.net/zouxy09/article/details/7922923>）

* #### Haar-like特征的计算-积分图

#####  积分图就是只遍历一次图像就可以求出图像中所有区域像素和的快速算法，大大的提高了图像特征值计算的效率。积分图主要的思想是将图像从起点开始到各个点所形成的矩形区域像素之和作为一个数组的元素保存在内存中，当要计算某个区域的像素和时可以直接索引数组的元素，不用重新计算这个区域的像素和，从而加快了计算（这有个相应的称呼，叫做动态规划算法）。积分图能够在多种尺度下，使用相同的时间（常数时间）来计算不同的特征，因此大大提高了检测速度。



## HOG特征

#### 方向梯度直方图特征是一种计算机视觉和图像处理中用来进行物体检测的特征描述子。它通过计算和统计图像局部区域的梯度方向直方图来构成特征。HOG特征结合SVM分类器已经被广泛应用于图像识别中，尤其是在行人检测中获得了极大的成功。

* ##### 主要思想

  在一副图中，局部目标的表象和形状能够被梯度或边缘的方向密度分布很好地描述。

* ##### 具体的实现方法

  首先将图像分成小的连通区域，我们将其叫为细胞单元。然后采集细胞单元中各像素点的梯度和或边缘的方向直方图。最后把这些直方图组合起来就可以构成特征描述器

* #### 优点

  与其他的特征描述方法相比，HOG有很多优点。首先，由于HOG是在图像的局部方格单元上操作，所以它对图像几何的和光学的形变都能保持很好的不变性，这两种形变只会出现在更大的空间领域上。其次，在粗的空域抽样、精细的方向抽样以及较强的局部光学归一化等条件下，只要行人大体上能够保持直立的姿势，可以容许行人有一些细微的肢体动作，这些细微的动作可以被忽略而不影响检测效果。因此HOG特征是特别适合于做图像中的人体检测的。

#### HOG特征提取算法的实现大概过程

* ##### 灰度化

  减少像素值（而且是将三通道图转成单通道，因为大致像素分布不会太大改变，所以一定程度上可以理解成一种高效的降维技巧）

* ##### 标准化

  采用Gamma校正法对图像进行颜色空间的标准化，达到调节图像对比度的目的，降低图像局部阴影和光照变化所造成的影响，同时可以抑制噪音的干扰

* ##### 求梯度

  计算图像每个像素的梯度，主要为了捕获轮廓信息，同时进一步弱化光照的干扰

* ##### 分割图像

  将图像划分成cells（如：6x6）

* ##### 统计每个cell的梯度直方图

* ##### 组成block

  将几个cell组成一个block，一个block内所有的cell的特征descriptor串联起来后便得到该block的HOG特征descriptor

* ##### 得到特征向量

  将image内所有HOG特征descriptor串联起来就可以得到该image的特征向量

![](http://img.my.csdn.net/uploads/201208/31/1346396859_7322.jpg)